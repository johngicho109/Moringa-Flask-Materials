<!DOCTYPE html>
<!-- saved from url=(0095)https://moringaschool.instructure.com/courses/448/pages/monday-flask-login?module_item_id=40095 -->
<html class="" dir="ltr" lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link rel="preload" href="https://moringaschool.instructure.com/dist/fonts/lato/extended/Lato-Regular-bd03a2cc27.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="preload" href="https://moringaschool.instructure.com/dist/fonts/lato/extended/Lato-Bold-cccb897485.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="preload" href="https://moringaschool.instructure.com/dist/fonts/lato/extended/Lato-Italic-4eb103b4d1.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="stylesheet" media="screen" href="./fl35_files/lato_extended-f5a83bde37.css">
    <script async="" src="./fl35_files/analytics.js"></script><script async="" src="./fl35_files/analytics.js"></script><script>if (navigator.userAgent.match(/(MSIE|Trident\/)/)) location.replace('/ie-is-not-supported.html')</script>
  
  <link rel="shortcut icon" type="image/x-icon" href="https://instructure-uploads-eu.s3-eu-west-1.amazonaws.com/account_118060000000000001/attachments/23/Moringa%20Logo-02.png">
  <link rel="apple-touch-icon" href="https://instructure-uploads-eu.s3-eu-west-1.amazonaws.com/account_118060000000000001/attachments/16/MORINGA%20TREE%20WHITE.png">
  <link rel="stylesheet" media="all" href="./fl35_files/variables-8391c84da435c9cfceea2b2b3317ff66.css">
  <link rel="stylesheet" media="all" href="./fl35_files/common-38059c49a5.css">
  <meta name="apple-itunes-app" content="app-id=480883488">
<link rel="manifest" href="https://moringaschool.instructure.com/web-app-manifest/manifest.json">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#8e9847">
  <link rel="stylesheet" media="all" href="./fl35_files/wiki_page-f893268088.css">
<link rel="stylesheet" media="all" href="./fl35_files/new_user_tutorials-2950c871dd.css">
  <link rel="stylesheet" media="all" href="./fl35_files/canvas.css">
  <script>
    function _earlyClick(e){
      var c = e.target
      while (c && c.ownerDocument) {
        if (c.getAttribute('href') == '#' || c.getAttribute('data-method')) {
          if (!e.defaultPrevented) {
            e.preventDefault()
          }
          (_earlyClick.clicks = _earlyClick.clicks || []).push(c)
          break
        }
        c = c.parentNode
      }
    }
    document.addEventListener('click', _earlyClick)
  </script>


  <script>
    INST = {"environment":"production","allowMediaComments":true,"kalturaSettings":{"domain":"eu.nv.instructuremedia.com","resource_domain":"eu.nv.instructuremedia.com","rtmp_domain":"dub.rtmp.instructuremedia.com","partner_id":"5","subpartner_id":"0","player_ui_conf":"0","kcw_ui_conf":"0","upload_ui_conf":"0","max_file_size_bytes":534773760,"do_analytics":false,"hide_rte_button":false,"js_uploader":true},"logPageViews":true,"maxVisibleEditorButtons":3,"editorButtons":[{"name":"Commons Favourites","id":1,"favorite":false,"url":"https://lor.instructure.com/api/lti/favorite-resources","icon_url":"https://lor.instructure.com/img/icon_commons.png","canvas_icon_class":null,"width":800,"height":400,"use_tray":true,"description":"\u003cp\u003eFind and share course content\u003c/p\u003e\n"},{"name":"Google Drive (LTI 1.3)","id":148,"favorite":false,"url":"https://assignments.google.com/lti/e","icon_url":"https://www.gstatic.com/images/branding/product/1x/drive_16dp.png","canvas_icon_class":null,"width":690,"height":530,"use_tray":false,"description":"\u003cp\u003eCollect, analyze, and grade student work with Google Assignments\u003c/p\u003e\n"},{"name":"YouTube","id":158,"favorite":true,"url":"https://www.edu-apps.org/lti_public_resources/?tool_id=youtube","icon_url":"https://www.edu-apps.org/assets/lti_public_resources/youtube_icon.png","canvas_icon_class":null,"width":560,"height":600,"use_tray":false,"description":"\u003cp\u003eSearch publicly available YouTube videos. A new icon will show up in your course rich editor letting you search YouTube and click to embed videos in your course material.\u003c/p\u003e\n"},{"name":"Google Apps","id":162,"favorite":false,"url":"https://google-drive-lti-iad-prod.instructure.com/lti/rce-content-selection","icon_url":"https://google-drive-lti-iad-prod.instructure.com/icon.png","canvas_icon_class":null,"width":700,"height":600,"use_tray":false,"description":"\u003cp\u003eAllows you to pull in documents from Google Drive to Canvas\u003c/p\u003e\n"}]};
    ENV = {"ASSET_HOST":"https://du11hjcvx0uqb.cloudfront.net/br","active_brand_config_json_url":"https://du11hjcvx0uqb.cloudfront.net/br/dist/brandable_css/b5f0573040e8649cf4cc5fc40f5957de/variables-8391c84da435c9cfceea2b2b3317ff66.json","url_to_what_gets_loaded_inside_the_tinymce_editor_css":["https://du11hjcvx0uqb.cloudfront.net/br/dist/brandable_css/b5f0573040e8649cf4cc5fc40f5957de/variables-8391c84da435c9cfceea2b2b3317ff66.css","https://du11hjcvx0uqb.cloudfront.net/br/dist/brandable_css/responsive_layout_normal_contrast/bundles/what_gets_loaded_inside_the_tinymce_editor-30c1708b62.css","https://du11hjcvx0uqb.cloudfront.net/br/dist/brandable_css/no_variables/bundles/lato_extended-f5a83bde37.css"],"url_for_high_contrast_tinymce_editor_css":["https://du11hjcvx0uqb.cloudfront.net/br/dist/brandable_css/default/variables-high_contrast-8391c84da435c9cfceea2b2b3317ff66.css","https://du11hjcvx0uqb.cloudfront.net/br/dist/brandable_css/responsive_layout_high_contrast/bundles/what_gets_loaded_inside_the_tinymce_editor-4a61d234df.css","https://du11hjcvx0uqb.cloudfront.net/br/dist/brandable_css/no_variables/bundles/lato_extended-f5a83bde37.css"],"current_user_id":"4577","current_user_roles":["user","student"],"current_user_types":[],"current_user_disabled_inbox":false,"files_domain":"cluster295.canvas-user-content.com","DOMAIN_ROOT_ACCOUNT_ID":"118060000000000001","k12":false,"use_responsive_layout":true,"use_rce_enhancements":true,"rce_auto_save":true,"use_rce_a11y_checker_notifications":false,"help_link_name":"Help Desk","help_link_icon":"cog","use_high_contrast":false,"auto_show_cc":false,"disable_celebrations":false,"disable_keyboard_shortcuts":false,"LTI_LAUNCH_FRAME_ALLOWANCES":["geolocation *","microphone *","camera *","midi *","encrypted-media *","autoplay *"],"DEEP_LINKING_POST_MESSAGE_ORIGIN":"https://moringaschool.instructure.com","DEEP_LINKING_LOGGING":null,"comment_library_suggestions_enabled":false,"SETTINGS":{"open_registration":false,"collapse_global_nav":false,"release_notes_badge_disabled":false},"API_GATEWAY_URI":"https://api.eu-west-1.instructure.com/graphql/future","DIRECT_SHARE_ENABLED":false,"FEATURES":{"cc_in_rce_video_tray":true,"featured_help_links":true,"rce_pretty_html_editor":true,"rce_better_file_downloading":true,"rce_better_file_previewing":true,"strip_origin_from_quiz_answer_file_references":true,"rce_buttons_and_icons":false,"important_dates":true,"feature_flag_filters":false,"k5_parent_support":false,"k5_homeroom_many_announcements":true,"responsive_awareness":true,"responsive_misc":true,"product_tours":false,"files_dnd":true,"usage_rights_discussion_topics":true,"inline_math_everywhere":true,"granular_permissions_manage_users":true,"rce_limit_init_render_on_page":true,"embedded_release_notes":true,"canvas_k6_theme":false,"new_math_equation_handling":true},"current_user":{"id":"4577","display_name":"john.gicho@student.moringaschool.com","avatar_image_url":"https://moringaschool.instructure.com/images/messages/avatar-50.png","html_url":"https://moringaschool.instructure.com/about/4577","pronouns":null,"avatar_is_fallback":true},"page_view_update_url":"/page_views/f94b0e1d-e896-4be9-9870-47db3ecaffce?page_view_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpIjoiZjk0YjBlMWQtZTg5Ni00YmU5LTk4NzAtNDdkYjNlY2FmZmNlIiwidSI6MTE4MDYwMDAwMDAwMDA0NTc3LCJjIjoiMjAyMS0xMC0wOVQwOTowMDoyMS44OFoifQ.aWFzHwefLhSb1pwM5tGkmcY2Fxc0JTfF_5IRkg8d93c","context_asset_string":"course_448","ping_url":"https://moringaschool.instructure.com/api/v1/courses/448/ping","TIMEZONE":"Africa/Nairobi","CONTEXT_TIMEZONE":"Africa/Nairobi","LOCALE":"en-GB","BIGEASY_LOCALE":"en_GB","FULLCALENDAR_LOCALE":"en-gb","MOMENT_LOCALE":"en-gb","rce_auto_save_max_age_ms":86400000,"K5_USER":false,"K5_HOMEROOM_COURSE":false,"K5_SUBJECT_COURSE":false,"WIKI_RIGHTS":{"read":true},"PAGE_RIGHTS":{"read":true},"DEFAULT_EDITING_ROLES":"teachers","WIKI_PAGES_PATH":"/courses/448/pages","WIKI_PAGE":{"editing_roles":"teachers","title":"Monday: Flask Login","created_at":"2021-08-29T16:31:13+03:00","url":"monday-flask-login","page_id":"37620","published":true,"hide_from_students":false,"front_page":false,"html_url":"https://moringaschool.instructure.com/courses/448/pages/monday-flask-login","todo_date":null,"updated_at":"2021-08-29T16:31:13+03:00","locked_for_user":false,"body":"\u003cdiv id=\"content\"\u003e\n\u003ch2\u003eFlask-Login\u003c/h2\u003e\n\u003cp\u003eThe Flask-Login is an extension that helps us manage the user authentication system\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003evirtual\u003cspan class=\"o\"\u003e)\u003c/span\u003e$ pip install flask-login\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe install the extension and we can Initialize it inside our\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003ecreate_app\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003efunction.\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e#....\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eflask_login\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eLoginManager\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003elogin_manager\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eLoginManager\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003elogin_manager\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esession_protection\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e'strong'\u003c/span\u003e\n\u003cspan class=\"n\"\u003elogin_manager\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003elogin_view\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e'auth.login'\u003cbr\u003e\u003cbr\u003edef create_app(config_name):\u003cbr\u003e\u003c/span\u003e    #....\u003cbr\u003e    #Initializing Flask Extensions\u003cbr\u003e    bootstrap.init_app(app)\u003cbr\u003e    db.init_app(app)\u003cbr\u003e    login_manager.init_app(app)\n\u003cspan class=\"c1\"\u003e#....\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe import the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eLogin Manager\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eclass from the flask-login extension. We then create an instance of the class.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003elogin_manager.session_protection\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eattribute provides different security levels and by setting it to\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003estrong\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003ewill monitor the changes in a user's request header and log the user out.\u003c/p\u003e\n\u003cp\u003eWe prefix the login endpoint with the blueprint name because it is located inside a blueprint.\u003c/p\u003e\n\u003ch3\u003eAuthenticated routes\u003c/h3\u003e\n\u003cp\u003eSome routes like submitting a new review should only be accessible to users who are authenticated and need to be secured.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/main/views.py\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e#....\nfrom flask_login import login_required\n#....\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eflask_login has a decorator\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003elogin_required\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003ethat will intercept a request and check if the user is authenticated and if not the user will be redirected to the login page.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/main/views.py\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e#....\n@main.route('/movie/review/new/\u0026lt;int:id\u0026gt;', methods = ['GET','POST'])\n@login_required\ndef new_review(id):\n#....\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe place the decorator after our new review route decorator.\u003c/p\u003e\n\u003ch3\u003eConfiguring Models\u003c/h3\u003e\n\u003cp\u003eWe need to configure our User model to work with the extension. For this to happen we need our model to implement four methods:\u003c/p\u003e\n\u003cp style=\"padding-left: 150px;\"\u003e1. is_authenticated() - Returns a boolean if a User is authenticated or not.\u003c/p\u003e\n\u003cp style=\"padding-left: 150px;\"\u003e2. is_active()- Checks if a user is allowed to authenticate.\u003c/p\u003e\n\u003cp style=\"padding-left: 150px;\"\u003e3. is_anonymous()- Returns a boolean if a user is anonymous.\u003c/p\u003e\n\u003cp style=\"padding-left: 150px;\"\u003e4. get_id()- Returns a unique identifier for User.\u003c/p\u003e\n\u003cp\u003eFlask-login provides a class that has the basic implementations of these methods.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/models.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eflask_login\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eUserMixin\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe import the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eUserMixin\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eclass that we will pass into our\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eUser\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003emodel. This helps us not to have to implement the methods for ourselves.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/models.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eUserMixin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eModel\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e__tablename__\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e'users'\u003c/span\u003e\n\n    \u003cspan class=\"nb\"\u003eid\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColumn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInteger\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eprimary_key\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eusername\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColumn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColumn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003eunique\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003erole_id\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColumn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInteger\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eForeignKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'roles.id'\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epassword_hash\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColumn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe also add an\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eemail\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003ecolumn to our module, this will help our users to have a better access to their accounts. Remember to create a new Migration after you change the model.\u003c/p\u003e\n\u003cp\u003eFlask-login also requires a callback function that retrieves a user when a unique identifier is passed.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/models.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e#....\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003e.\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003elogin_manager\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@login_manager.user_loader\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eload_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003equery\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#....\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eFlask-login has a decorator\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003e@login_manage.user_loader\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003ethat modifies the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eload_user\u003c/code\u003efunction by passing in a\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003euser_id\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eto the function that queries the database and gets a User with that ID.\u003c/p\u003e\n\u003ch2\u003eRegistering New Users\u003c/h2\u003e\n\u003cp\u003eWe can now register new Users to our application. We first need to create the registration form. We create a new file inside our\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eauth\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003epackage\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eforms.py\u003c/code\u003e. We then need to import it to our\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eauth/___init___.py\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003efile.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eauth/__init__.py\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003e.\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eviews\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eforms\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe can now create our registration form\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eauth /forms.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eflask_wtf\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eFlaskForm\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ewtforms\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eStringField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ePasswordField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eSubmitField\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ewtforms.validators\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eRequired\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eEmail\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eEqualTo\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003e..models\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe first need to import a few items. First, we import the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eFlaskForm\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eclass from the\u003ccode\u003eflask_wtf\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eextension. Secondly, we also import some input fields to facilitate user input. We then import some Validators;\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eEmail\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003evalidator makes sure that the input follows a proper email address structure and the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eEqualTo\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u0026nbsp;helps us in comparing the two password inputs.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eauth /forms.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRegistrationForm\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eFlaskForm\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eStringField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Your Email Address'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003evalidators\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eRequired\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\u003cspan class=\"n\"\u003eEmail\u003c/span\u003e\u003cspan class=\"p\"\u003e()])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eusername\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eStringField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Enter your username'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003evalidators\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eRequired\u003c/span\u003e\u003cspan class=\"p\"\u003e()])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epassword\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePasswordField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Password'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003evalidators\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eRequired\u003c/span\u003e\u003cspan class=\"p\"\u003e(), \u003c/span\u003e\u003cspan class=\"n\"\u003eEqualTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'password_confirm'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e'Passwords must match'\u003c/span\u003e\u003cspan class=\"p\"\u003e)])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epassword_confirm\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePasswordField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Confirm Passwords'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003evalidators\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eRequired\u003c/span\u003e\u003cspan class=\"p\"\u003e()])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003esubmit\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSubmitField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Sign Up'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe then create a\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eRegistrationForm\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eform class. We create four input fields.\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eemail\u003c/code\u003efor the users email address, and pass in the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eRequired\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eand\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eEmail\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003evalidators.\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eusername\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003efor the username field,\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003epassword\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eand\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003epassword_confirm\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003efields. We pass in the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eEqualTo\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003evalidator to the password to make sure both passwords are the same before the form is submitted.\u003c/p\u003e\n\u003ch3\u003eCustom Validators\u003c/h3\u003e\n\u003cp\u003eWe can also add our own custom validators.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eauth /forms.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ewtforms\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eValidationError\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRegistrationForm\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eFlaskForm\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# .......\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003evalidate_email\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003edata_field\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003equery\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efilter_by\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003edata_field\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efirst\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eraise\u003c/span\u003e \u003cspan class=\"n\"\u003eValidationError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'There is an account with that email'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003evalidate_username\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003edata_field\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003equery\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efilter_by\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eusername\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edata_field\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efirst\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eraise\u003c/span\u003e \u003cspan class=\"n\"\u003eValidationError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'That username is taken'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe import\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eValidationError\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003efrom wtforms and then create two methods.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003evalidate_email\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003etakes in the data field and checks our database to confirm there is no user registered with that email address. If a user with the same email address is found,\u0026nbsp; a\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eValidationError\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eis raised and the error message passed in is displayed. As a result, the form is not submitted.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003evalidate_username\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003echecks to see if the username is unique and raises a\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eValidationError\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eif another user with a similar username is found.\u003c/p\u003e\n\u003cp\u003eWhen a method inside a form class begins with\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003evalidate_\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eit is considered as a validator and is run with the other validators for that input field.\u003c/p\u003e\n\u003ch3\u003eRegistration route\u003c/h3\u003e\n\u003cp\u003e\u003cem\u003eauth/views.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e# ....\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eflask\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003erender_template\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eredirect\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eurl_for\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003e..models\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003e.forms\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eRegistrationForm\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003e..\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003edb\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# ....\u003c/span\u003e\n\u003cspan class=\"nd\"\u003e@auth.route\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'/register'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003emethods\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"GET\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"POST\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eregister\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eform\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eRegistrationForm\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidate_on_submit\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n        \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eusername\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eusername\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003epassword\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esession\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esession\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecommit\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eredirect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eurl_for\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'auth.login'\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etitle\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"New Account\"\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003erender_template\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'auth/register.html'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eregistration_form\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe create the form instance and pass it into our template. When the form is submitted we create a new user from the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eUser\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003emodel and pass in the email,username and password. We add the new user to the session and commit the session to add the user to our database.\u003c/p\u003e\n\u003cp\u003eOur user can then log in to the application and we redirect them to the login route.\u003c/p\u003e\n\u003cp\u003eWe can render the registration form with the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003ewtf.quick_form()\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003efunction.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/templates/auth/register.html\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e{% extends 'base.html'%}\u003cbr\u003e{% import 'bootstrap/wtf.html' as wtf%}\u003cbr\u003e\u003cbr\u003e{% block content %}\u003cbr\u003e\u0026lt;div class=\"container\"\u0026gt;\u003cbr\u003e\u0026lt;div class=\"row\"\u0026gt;\u003cbr\u003e\u0026lt;div class=\"col-md-2\"\u0026gt; \u0026lt;/div\u0026gt;\u003cbr\u003e\u0026lt;div class=\"col-md-8\"\u0026gt;\u003cbr\u003e\u003cbr\u003e{{wtf.quick_form(registration_form)}}\u003cbr\u003e\u003cbr\u003e\u0026lt;/div\u0026gt;\u003cbr\u003e\u0026lt;div class=\"col-md-2\"\u0026gt;\u0026lt;/div\u0026gt;\u003cbr\u003e\u0026lt;/div\u0026gt;\u003cbr\u003e\u0026lt;/div\u0026gt;\u003cbr\u003e\u003cbr\u003e{% endblock%}\u003ccode\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003ch2\u003eLogin Users\u003c/h2\u003e\n\u003cp\u003eWe need to create a Login form that will give users access to some of the features of our application.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/auth/forms.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e#....\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ewtforms\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eStringField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ePasswordField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eBooleanField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eSubmitField\u003c/span\u003e\n\u003cspan class=\"o\"\u003e.....\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe add a\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eBooleanField\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003einput field that will render a checkbox in our form.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/auth/forms.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eLoginForm\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eFlaskForm\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eStringField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Your Email Address'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003evalidators\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eRequired\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\u003cspan class=\"n\"\u003eEmail\u003c/span\u003e\u003cspan class=\"p\"\u003e()])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epassword\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePasswordField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Password'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003evalidators\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eRequired\u003c/span\u003e\u003cspan class=\"p\"\u003e()])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eremember\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eBooleanField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Remember me'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003esubmit\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSubmitField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Sign In'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe then create 3 input fields for the users email,password and a boolean to confirm wheter the user wants to be logged out after the session.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/auth/views.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e#....\u003cbr\u003e\u003c/span\u003efrom flask import render_template,redirect,url_for, flash,request\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eflask_login\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003elogin_user\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003e..models\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003e.forms\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eLoginForm\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eRegistrationForm\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#....\u003c/span\u003e\n\u003cspan class=\"nd\"\u003e@auth.route\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'/login'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003emethods\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s1\"\u003e'GET'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"s1\"\u003e'POST'\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elogin\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elogin_form\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eLoginForm\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003elogin_form\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidate_on_submit\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n        \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003equery\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efilter_by\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003elogin_form\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efirst\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"ow\"\u003eis\u003c/span\u003e \u003cspan class=\"ow\"\u003enot\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e \u003cspan class=\"ow\"\u003eand\u003c/span\u003e \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003everify_password\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elogin_form\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n            \u003cspan class=\"n\"\u003elogin_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003elogin_form\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eremember\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eredirect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'next'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"ow\"\u003eor\u003c/span\u003e \u003cspan class=\"n\"\u003eurl_for\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'main.index'\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eflash\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Invalid username or Password'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003etitle\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"watchlist login\"\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003erender_template\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'auth/login.html'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003elogin_form\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003elogin_form\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#....\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eFirst, we import flash and request functions from the flask module. The flash function helps us display error messages to the user.\u003c/p\u003e\n\u003cp\u003eWe create an instance of the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eLoginForm\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eand pass it into the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003elogin.html\u003c/code\u003etemplate. Then we check if the form is validated where we search for a user from our database with the email we receive from the form.\u003c/p\u003e\n\u003cp\u003eWe then use the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003everify_password\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003emethod to confirm that the password entered matches with the password hash stored in the database. If they match, we use the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003elogin_user\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003efunction provided by the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eflask_login\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003eextension to record the user as logged for that current session. It takes user object and the remember form data. If True it sets a long time cookie in your browser.\u003c/p\u003e\n\u003cp\u003eWe can now render the form in our\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003elogin.html\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003etemplate using the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003ewtf.quick_forms()\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003efunction.\u003c/p\u003e\n\u003cp\u003eTo confirm login state we can update our navigation bar.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eapp/templates/navbar.html\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e#....\n                \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eul\u003c/span\u003e \u003cspan class=\"na\"\u003eclass\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"nav navbar-nav navbar-right\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n                  {% if current_user.is_authenticated %}\n                  \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eli style=\"color:white;padding:15px;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e{{current_user.username}}\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n                  \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ea\u003c/span\u003e \u003cspan class=\"na\"\u003ehref\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{{url_for('auth.logout')}}\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003eSign out\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n                  {% else %}\n                  \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003ea\u003c/span\u003e \u003cspan class=\"na\"\u003ehref\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{{url_for('auth.login')}}\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003eSign in\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eli\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n                  {%endif%}\n                \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"nt\"\u003eul\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n#....\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eCurrent user is a variable that is defined by flask-login and is made available to all the view functions and templates.\u003c/p\u003e\n\u003cp\u003eNow that we have all that taken care of, let's update our login.html file to have a form and a link to the sign up page.\u003c/p\u003e\n\u003cp\u003elogin.html\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e{%\u003c/span\u003e \u003cspan class=\"k\"\u003eextends\u003c/span\u003e \u003cspan class=\"s1\"\u003e'base.html'\u003c/span\u003e\u003cspan class=\"cp\"\u003e%}\u003c/span\u003e\u003cspan class=\"x\"\u003e\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e{%\u003c/span\u003e \u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"s1\"\u003e'bootstrap/wtf.html'\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"nv\"\u003ewtf\u003c/span\u003e\u003cspan class=\"cp\"\u003e%}\u003c/span\u003e\u003cspan class=\"x\"\u003e\u003c/span\u003e\n\n\u003cspan class=\"cp\"\u003e{%\u003c/span\u003e \u003cspan class=\"k\"\u003eblock\u003c/span\u003e \u003cspan class=\"nv\"\u003econtent\u003c/span\u003e \u003cspan class=\"cp\"\u003e%}\u003c/span\u003e\u003cspan class=\"x\"\u003e\u003c/span\u003e\n\u003cspan class=\"x\"\u003e\u0026lt;div class=\"container\"\u0026gt; \u003cbr\u003e    \u0026lt;div class=\"row\"\u0026gt;\u003cbr\u003e      \u0026lt;div class= \"col-md-2\"\u0026gt; \u0026lt;/div\u0026gt;\u003cbr\u003e      \u0026lt;div class=\"col-md-8\"\u0026gt;\u003cbr\u003e      \u0026lt;!--Flash message --\u0026gt;\u003cbr\u003e      {% for message in get_flashed_messages() %}\u003cbr\u003e        \u0026lt;div class=\"alert alert-danger\"\u0026gt;\u003cbr\u003e        \u0026lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"\u0026gt;\u0026amp;times;\u0026lt;/button\u0026gt;\u003cbr\u003e        {{ message }}\u003cbr\u003e        \u0026lt;/div\u0026gt;\u003cbr\u003e      {% endfor %}\u003cbr\u003e      \u0026lt;!-- Login form --\u0026gt;\u003cbr\u003e      {{wtf.quick_form(login_form)}}\u003cbr\u003e      \u0026lt;p\u0026gt; Don't have an account? \u0026lt;a href=\"{{url_for('auth.register')}}\"\u0026gt;Sign up here\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u003cbr\u003e     \u0026lt;/div\u0026gt;\u003cbr\u003e     \u0026lt;div clas=\"col-md-2\"\u0026gt; \u0026lt;/div\u0026gt;\u003cbr\u003e    \u0026lt;/div\u0026gt;\u003cbr\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"cp\"\u003e{%\u003c/span\u003e \u003cspan class=\"k\"\u003eendblock\u003c/span\u003e\u003cspan class=\"cp\"\u003e%}\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003ch3\u003eLog out\u003c/h3\u003e\n\u003cp\u003e\u003cem\u003eapp/auth/views.py\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"codehilite\"\u003e\n\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eflask_login\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003elogin_user\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003elogout_user\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003elogin_required\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#....\u003c/span\u003e\n\u003cspan class=\"nd\"\u003e@auth.route\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'/logout'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nd\"\u003e@login_required\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003elogout\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elogout_user\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eredirect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eurl_for\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"main.index\"\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#....\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eWe create an authenticated route\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003elogout\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003ethat calls the flask_login's\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003elogout_user\u003c/code\u003efunction. This will logout the user from our application. We then redirect the user to the\u003cspan\u003e\u0026nbsp;\u003c/span\u003e\u003ccode\u003eindex\u003c/code\u003e\u003cspan\u003e\u0026nbsp;\u003c/span\u003epage.\u003c/p\u003e\n\u003cp\u003eYou can find the application at this point here \u003ca href=\"https://github.com/mbuthiya/watchlist/tree/25-creating-registration-form\"\u003ehttps://github.com/mbuthiya/watchlist/tree/25-creating-registration-form\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cp\u003eCopyright 2017 Moringa School.\u003c/p\u003e"},"WIKI_PAGE_REVISION":"1","WIKI_PAGE_SHOW_PATH":"/courses/448/pages/monday-flask-login","WIKI_PAGE_EDIT_PATH":"/courses/448/pages/monday-flask-login/edit","WIKI_PAGE_HISTORY_PATH":"/courses/448/pages/monday-flask-login/revisions","COURSE_ID":"448","MODULES_PATH":"/courses/448/modules","wiki_page_menu_tools":[],"wiki_index_menu_tools":[],"DISPLAY_SHOW_ALL_LINK":false,"CAN_SET_TODO_DATE":false,"badge_counts":{"submissions":0},"notices":[],"active_context_tab":"pages"};
    BRANDABLE_CSS_HANDLEBARS_INDEX = [["new_styles_normal_contrast","new_styles_high_contrast","responsive_layout_normal_contrast","responsive_layout_high_contrast","new_styles_normal_contrast_rtl","new_styles_high_contrast_rtl","responsive_layout_normal_contrast_rtl","responsive_layout_high_contrast_rtl"],{"10":["5bbee90ed9",0,0,0,"f8054b5691",4,4,4],"15":["fc26aa5fd4",0,0,0,"f904416063",4,4,4],"19":["df5777ed9c"],"61":["c34731ada0","f405852bb2",0,1,"a4eda69452","3fd9943b9a",4,5],"64":["6d90a3d213",0,0,0,"cace9d4281",4,4,4],"67":["8b57f54e71",0,0,0,"43833dde85",4,4,4],"71":["dca6322676","3128a2cc3b",0,1,"1b8a1b5af4","851e44943d",4,5],"06":["4526e0502d",0,0,0,"4ca4dedba8",4,4,4],"f0":["7c947dce20",0,0,0,0,0,0,0],"c8":["ce38e5e01d","b9068fb85c",0,1,"abe25b43ac","891d385c6e",4,5],"1e":["a4ce6b99b5","39d2986ce0","93968ae330","541e45feba","e12dd92511","ba63dd3b58","8594db4d82","e291bb53e9"],"b3":["8ebc71ebc3","cf8efa05c8",0,1,"4efdc93a21","fd6d3a9780",4,5],"4f":["0a2c3dcf2f",0,0,0,"79668e6396",4,4,4],"0c":["c26e82abac",0,0,0,"b71e9cbd6d",4,4,4],"da":["b218c8c3f2","edbd1b5e83",0,1,"312312508c","dfb2d13098",4,5],"1d":["a3bfcb7961",0,0,0,"90682b3bbe",4,4,4],"08":["64bff5a97d"],"e2":["11429f119a"],"9f":["35936a18c3",0,0,0,0,0,0,0],"2b":["87b3ec4aa1",0,0,0,"39522697fb",4,4,4],"2c":["6d919206cd",0,0,0,0,0,0,0],"c2":["6f2721ae01"],"9c":["ecafc938e4",0,0,0,"59e7c22304",4,4,4],"6f":["363cd4d36b",0,0,0,0,0,0,0],"c5":["ebf0e1382f","7f587d9a8a",0,1,"afbdabf23d","0d398196a8",4,5],"f2":["51574f9b13"]}]
;
  </script>

  <link rel="preload" href="./fl35_files/variables-8391c84da435c9cfceea2b2b3317ff66.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/Nairobi-ab431c0929.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/Nairobi-ab431c0929.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/en_GB-31745e04c9.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/en-gb-c-c7b9246cab.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/main-e-deba862062.js" as="script" type="text/javascript"><script>
//<![CDATA[

      ;["https://du11hjcvx0uqb.cloudfront.net/br/dist/brandable_css/b5f0573040e8649cf4cc5fc40f5957de/variables-8391c84da435c9cfceea2b2b3317ff66.js", "https://du11hjcvx0uqb.cloudfront.net/br/dist/timezone/Africa/Nairobi-ab431c0929.js", "https://du11hjcvx0uqb.cloudfront.net/br/dist/timezone/Africa/Nairobi-ab431c0929.js", "https://du11hjcvx0uqb.cloudfront.net/br/dist/timezone/en_GB-31745e04c9.js", "https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/moment/locale/en-gb-c-c7b9246cab.js", "https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/main-e-deba862062.js"].forEach(function(src) {
        var s = document.createElement('script')
        s.src = src
        s.async = false
        document.head.appendChild(s)
      });
//]]>
</script><script src="./fl35_files/variables-8391c84da435c9cfceea2b2b3317ff66.js"></script><script src="./fl35_files/Nairobi-ab431c0929.js"></script><script src="./fl35_files/Nairobi-ab431c0929.js"></script><script src="./fl35_files/en_GB-31745e04c9.js"></script><script src="./fl35_files/en-gb-c-c7b9246cab.js"></script><script src="./fl35_files/main-e-deba862062.js"></script><link rel="preload" href="./fl35_files/0-c-d122efd52f.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/1-c-3b35301a94.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/2-c-d3eede0f8d.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/3-c-5d745b6aaa.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/4-c-e30a14ede8.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/5-c-6aa506df4f.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/6-c-1e1359c836.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/7-c-50566439b2.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/8-c-1de49f5daa.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/12-c-8e44d6013e.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/18-c-5802a4b12c.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/17-c-f853e81c20.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/22-c-90d46f84ca.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/27-c-77a1bbb478.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/30-c-957da7f976.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/32-c-5a482fa1e6.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/33-c-9f2b8d1bac.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/39-c-15d2cdb6af.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/37-c-547e6ea99d.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/41-c-da10155ccb.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/46-c-4c0eb2055d.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/45-c-8759630105.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/49-c-616658cd53.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/47-c-d27f10a861.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/59-c-dc01c5c5b9.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/62-c-2b5ffe60c5.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/65-c-3a03d69e15.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/80-c-491d727af3.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/84-c-c73777ec6f.js" as="script" type="text/javascript"><link rel="preload" href="./fl35_files/wiki_page_show-c-9b3ab880e6.js" as="script" type="text/javascript"><script>
//<![CDATA[
(window.bundles || (window.bundles = [])).push('wiki_page_show');
(window.bundles || (window.bundles = [])).push('navigation_header');
//]]>
</script>
  <title>Monday: Flask Login: SD Core 45 Flask Remote</title>
  
  <script>
    window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', "UA-9138420-1", 'auto');
      ga('set', 'userId', "88df3d2745977bba7b8386c486ec8657");
    ga('set', 'dimension1', "100");
    ga('set', 'dimension2', "00");
    ga('set', 'dimension3', "0");
    ga('set', 'dimension4', "Higher Ed");
    ga('send', 'pageview');
    (window.requestIdleCallback || window.setTimeout)(function(){
      var s=document.createElement('script'), m=document.getElementsByTagName('script')[0]
      s.async=1; s.src='https://www.google-analytics.com/analytics.js'
      m.parentNode.insertBefore(s,m)
    });
  </script>



<script src="./fl35_files/sth.js"></script><style type="text/css"></style><script charset="utf-8" src="./fl35_files/0-c-d122efd52f.js"></script><script charset="utf-8" src="./fl35_files/1-c-3b35301a94.js"></script><script charset="utf-8" src="./fl35_files/2-c-d3eede0f8d.js"></script><script charset="utf-8" src="./fl35_files/3-c-5d745b6aaa.js"></script><script charset="utf-8" src="./fl35_files/4-c-e30a14ede8.js"></script><script charset="utf-8" src="./fl35_files/5-c-6aa506df4f.js"></script><script charset="utf-8" src="./fl35_files/6-c-1e1359c836.js"></script><script charset="utf-8" src="./fl35_files/7-c-50566439b2.js"></script><script charset="utf-8" src="./fl35_files/8-c-1de49f5daa.js"></script><script charset="utf-8" src="./fl35_files/12-c-8e44d6013e.js"></script><script charset="utf-8" src="./fl35_files/18-c-5802a4b12c.js"></script><script charset="utf-8" src="./fl35_files/17-c-f853e81c20.js"></script><script charset="utf-8" src="./fl35_files/22-c-90d46f84ca.js"></script><script charset="utf-8" src="./fl35_files/27-c-77a1bbb478.js"></script><script charset="utf-8" src="./fl35_files/30-c-957da7f976.js"></script><script charset="utf-8" src="./fl35_files/32-c-5a482fa1e6.js"></script><script charset="utf-8" src="./fl35_files/33-c-9f2b8d1bac.js"></script><script charset="utf-8" src="./fl35_files/39-c-15d2cdb6af.js"></script><script charset="utf-8" src="./fl35_files/37-c-547e6ea99d.js"></script><script charset="utf-8" src="./fl35_files/41-c-da10155ccb.js"></script><script charset="utf-8" src="./fl35_files/46-c-4c0eb2055d.js"></script><script charset="utf-8" src="./fl35_files/45-c-8759630105.js"></script><script charset="utf-8" src="./fl35_files/49-c-616658cd53.js"></script><script charset="utf-8" src="./fl35_files/47-c-d27f10a861.js"></script><script charset="utf-8" src="./fl35_files/59-c-dc01c5c5b9.js"></script><script charset="utf-8" src="./fl35_files/62-c-2b5ffe60c5.js"></script><script charset="utf-8" src="./fl35_files/65-c-3a03d69e15.js"></script><script charset="utf-8" src="./fl35_files/80-c-491d727af3.js"></script><script charset="utf-8" src="./fl35_files/84-c-c73777ec6f.js"></script><script charset="utf-8" src="./fl35_files/wiki_page_show-c-9b3ab880e6.js"></script><script charset="utf-8" src="./fl35_files/inst_fs_service_worker-c-45cd13f265.js"></script><script charset="utf-8" src="./fl35_files/4107-c-fc094bc328.js"></script><script charset="utf-8" src="./fl35_files/4040-c-abbc9a7bf2.js"></script><style type="text/css" data-glamor=""></style><script charset="utf-8" src="./fl35_files/14-c-89932b56a2.js"></script><script charset="utf-8" src="./fl35_files/21-c-8ca8ad475e.js"></script><script charset="utf-8" src="./fl35_files/23-c-a26d41249b.js"></script><script charset="utf-8" src="./fl35_files/25-c-6c69c308fe.js"></script><script charset="utf-8" src="./fl35_files/31-c-f9e5792f22.js"></script><script charset="utf-8" src="./fl35_files/44-c-84e08ce0fa.js"></script><script charset="utf-8" src="./fl35_files/77-c-cabae41b59.js"></script><script charset="utf-8" src="./fl35_files/103-c-a3471c16cf.js"></script><script charset="utf-8" src="./fl35_files/3619-c-240c9c039d.js"></script><script charset="utf-8" src="./fl35_files/4106-c-508ab6be12.js"></script><style type="text/css">.mejs-offscreen{clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);clip-path:polygon(0px 0,0 0,0 0,0 0);position:absolute!important;height:1px;width:1px;overflow:hidden}.mejs-container{position:relative;background:#000;font-family:Helvetica,Arial,serif;text-align:left;vertical-align:top;text-indent:0}.mejs-fill-container,.mejs-fill-container .mejs-container{width:100%;height:100%}.mejs-fill-container{overflow:hidden}.mejs-container:focus{outline:0}.me-plugin{position:absolute}.mejs-embed,.mejs-embed body{width:100%;height:100%;margin:0;padding:0;background:#000;overflow:hidden}.mejs-fullscreen{overflow:hidden!important}.mejs-container-fullscreen{position:fixed;left:0;top:0;right:0;bottom:0;overflow:hidden;z-index:1000}.mejs-container-fullscreen .mejs-mediaelement,.mejs-container-fullscreen video{width:100%;height:100%}.mejs-clear{clear:both}.mejs-background{position:absolute;top:0;left:0}.mejs-mediaelement{position:absolute;top:0;left:0;width:100%;height:100%}.mejs-poster{position:absolute;top:0;left:0;background-size:contain;background-position:50% 50%;background-repeat:no-repeat}:root .mejs-poster img{display:none}.mejs-poster img{border:0;padding:0}.mejs-overlay{position:absolute;top:0;left:0}.mejs-overlay-play{cursor:pointer}.mejs-overlay-button{position:absolute;top:50%;left:50%;width:100px;height:100px;margin:-50px 0 0 -50px;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/746c3af7a145a09239a36e5ef61cfea0.svg) no-repeat}.no-svg .mejs-overlay-button{background-image:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/716436fb3df0d29e6b37dd62d952676a.png)}.mejs-overlay:hover .mejs-overlay-button{background-position:0 -100px}.mejs-overlay-loading{position:absolute;top:50%;left:50%;width:80px;height:80px;margin:-40px 0 0 -40px;background:#333;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/703c659e4bf563a05c6338a1727e006c.png);background:rgba(0,0,0,.9);background:-webkit-gradient(linear,0 0,0 100%,from(rgba(50,50,50,.9)),to(rgba(0,0,0,.9)));background:-webkit-linear-gradient(top,rgba(50,50,50,.9),rgba(0,0,0,.9));background:-moz-linear-gradient(top,rgba(50,50,50,.9),rgba(0,0,0,.9));background:-o-linear-gradient(top,rgba(50,50,50,.9),rgba(0,0,0,.9));background:-ms-linear-gradient(top,rgba(50,50,50,.9),rgba(0,0,0,.9));background:linear-gradient(rgba(50,50,50,.9),rgba(0,0,0,.9))}.mejs-overlay-loading span{display:block;width:80px;height:80px;background:transparent url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/76b326f4d44222126fee21076595bef5.gif) 50% 50% no-repeat}.mejs-container .mejs-controls{position:absolute;list-style-type:none;margin:0;padding:0;bottom:0;left:0;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/703c659e4bf563a05c6338a1727e006c.png);background:rgba(0,0,0,.7);background:-webkit-gradient(linear,0 0,0 100%,from(rgba(50,50,50,.7)),to(rgba(0,0,0,.7)));background:-webkit-linear-gradient(top,rgba(50,50,50,.7),rgba(0,0,0,.7));background:-moz-linear-gradient(top,rgba(50,50,50,.7),rgba(0,0,0,.7));background:-o-linear-gradient(top,rgba(50,50,50,.7),rgba(0,0,0,.7));background:-ms-linear-gradient(top,rgba(50,50,50,.7),rgba(0,0,0,.7));background:linear-gradient(rgba(50,50,50,.7),rgba(0,0,0,.7));height:30px;width:100%}.mejs-container .mejs-controls div{list-style-type:none;background-image:none;display:block;float:left;margin:0;padding:0;width:26px;height:26px;font-size:11px;line-height:11px;font-family:Helvetica,Arial,serif;border:0}.mejs-controls .mejs-button button{cursor:pointer;display:block;font-size:0;line-height:0;text-decoration:none;margin:7px 5px;padding:0;position:absolute;height:16px;width:16px;border:0;background:transparent url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/40f56f5a736da4effeb790cedb8a52f0.svg) no-repeat}.no-svg .mejs-controls .mejs-button button{background-image:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/24a0227fbdd3acfd86ff03fc3fc6c8a4.png)}.mejs-controls .mejs-button button:focus{outline:dotted 1px #999}.mejs-container .mejs-controls .mejs-time{color:#fff;display:block;height:17px;width:auto;padding:10px 3px 0;overflow:hidden;text-align:center;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}.mejs-container .mejs-controls .mejs-time a{color:#fff;font-size:11px;line-height:12px;display:block;float:left;margin:1px 2px 0 0;width:auto}.mejs-controls .mejs-play button{background-position:0 0}.mejs-controls .mejs-pause button{background-position:0 -16px}.mejs-controls .mejs-stop button{background-position:-112px 0}.mejs-controls div.mejs-time-rail{direction:ltr;width:200px;padding-top:5px}.mejs-controls .mejs-time-rail span,.mejs-controls .mejs-time-rail a{display:block;position:absolute;width:180px;height:10px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;cursor:pointer}.mejs-controls .mejs-time-rail .mejs-time-total{margin:5px;background:#333;background:rgba(50,50,50,.8);background:-webkit-gradient(linear,0 0,0 100%,from(rgba(30,30,30,.8)),to(rgba(60,60,60,.8)));background:-webkit-linear-gradient(top,rgba(30,30,30,.8),rgba(60,60,60,.8));background:-moz-linear-gradient(top,rgba(30,30,30,.8),rgba(60,60,60,.8));background:-o-linear-gradient(top,rgba(30,30,30,.8),rgba(60,60,60,.8));background:-ms-linear-gradient(top,rgba(30,30,30,.8),rgba(60,60,60,.8));background:linear-gradient(rgba(30,30,30,.8),rgba(60,60,60,.8))}.mejs-controls .mejs-time-rail .mejs-time-buffering{width:100%;background-image:-o-linear-gradient(-45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(0.25,rgba(255,255,255,.15)),color-stop(0.25,transparent),color-stop(0.5,transparent),color-stop(0.5,rgba(255,255,255,.15)),color-stop(0.75,rgba(255,255,255,.15)),color-stop(0.75,transparent),to(transparent));background-image:-webkit-linear-gradient(-45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(-45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:-ms-linear-gradient(-45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-image:linear-gradient(-45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);-webkit-background-size:15px 15px;-moz-background-size:15px 15px;-o-background-size:15px 15px;background-size:15px 15px;-webkit-animation:buffering-stripes 2s linear infinite;-moz-animation:buffering-stripes 2s linear infinite;-ms-animation:buffering-stripes 2s linear infinite;-o-animation:buffering-stripes 2s linear infinite;animation:buffering-stripes 2s linear infinite}@-webkit-keyframes buffering-stripes{from{background-position:0 0}to{background-position:30px 0}}@-moz-keyframes buffering-stripes{from{background-position:0 0}to{background-position:30px 0}}@-ms-keyframes buffering-stripes{from{background-position:0 0}to{background-position:30px 0}}@-o-keyframes buffering-stripes{from{background-position:0 0}to{background-position:30px 0}}@keyframes buffering-stripes{from{background-position:0 0}to{background-position:30px 0}}.mejs-controls .mejs-time-rail .mejs-time-loaded{background:#3caac8;background:rgba(60,170,200,.8);background:-webkit-gradient(linear,0 0,0 100%,from(rgba(44,124,145,.8)),to(rgba(78,183,212,.8)));background:-webkit-linear-gradient(top,rgba(44,124,145,.8),rgba(78,183,212,.8));background:-moz-linear-gradient(top,rgba(44,124,145,.8),rgba(78,183,212,.8));background:-o-linear-gradient(top,rgba(44,124,145,.8),rgba(78,183,212,.8));background:-ms-linear-gradient(top,rgba(44,124,145,.8),rgba(78,183,212,.8));background:linear-gradient(rgba(44,124,145,.8),rgba(78,183,212,.8));width:0}.mejs-controls .mejs-time-rail .mejs-time-current{background:#fff;background:rgba(255,255,255,.8);background:-webkit-gradient(linear,0 0,0 100%,from(rgba(255,255,255,.9)),to(rgba(200,200,200,.8)));background:-webkit-linear-gradient(top,rgba(255,255,255,.9),rgba(200,200,200,.8));background:-moz-linear-gradient(top,rgba(255,255,255,.9),rgba(200,200,200,.8));background:-o-linear-gradient(top,rgba(255,255,255,.9),rgba(200,200,200,.8));background:-ms-linear-gradient(top,rgba(255,255,255,.9),rgba(200,200,200,.8));background:linear-gradient(rgba(255,255,255,.9),rgba(200,200,200,.8));width:0}.mejs-controls .mejs-time-rail .mejs-time-handle{display:none;position:absolute;margin:0;width:10px;background:#fff;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;cursor:pointer;border:solid 2px #333;top:-2px;text-align:center}.mejs-controls .mejs-time-rail .mejs-time-float{position:absolute;display:none;background:#eee;width:36px;height:17px;border:solid 1px #333;top:-26px;margin-left:-18px;text-align:center;color:#111}.mejs-controls .mejs-time-rail .mejs-time-float-current{margin:2px;width:30px;display:block;text-align:center;left:0}.mejs-controls .mejs-time-rail .mejs-time-float-corner{position:absolute;display:block;width:0;height:0;line-height:0;border:solid 5px #eee;border-color:#eee transparent transparent;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;top:15px;left:13px}.mejs-long-video .mejs-controls .mejs-time-rail .mejs-time-float{width:48px}.mejs-long-video .mejs-controls .mejs-time-rail .mejs-time-float-current{width:44px}.mejs-long-video .mejs-controls .mejs-time-rail .mejs-time-float-corner{left:18px}.mejs-controls .mejs-fullscreen-button button{background-position:-32px 0}.mejs-controls .mejs-unfullscreen button{background-position:-32px -16px}.mejs-controls .mejs-volume-button{}.mejs-controls .mejs-mute button{background-position:-16px -16px}.mejs-controls .mejs-unmute button{background-position:-16px 0}.mejs-controls .mejs-volume-button{position:relative}.mejs-controls .mejs-volume-button .mejs-volume-slider{height:115px;width:25px;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/703c659e4bf563a05c6338a1727e006c.png);background:rgba(50,50,50,.7);-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;top:-115px;left:0;z-index:1;position:absolute;margin:0}.mejs-controls .mejs-volume-button:hover{-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}.mejs-controls .mejs-volume-button .mejs-volume-slider .mejs-volume-total{position:absolute;left:11px;top:8px;width:2px;height:100px;background:#ddd;background:rgba(255,255,255,.5);margin:0}.mejs-controls .mejs-volume-button .mejs-volume-slider .mejs-volume-current{position:absolute;left:11px;top:8px;width:2px;height:100px;background:#ddd;background:rgba(255,255,255,.9);margin:0}.mejs-controls .mejs-volume-button .mejs-volume-slider .mejs-volume-handle{position:absolute;left:4px;top:-3px;width:16px;height:6px;background:#ddd;background:rgba(255,255,255,.9);cursor:N-resize;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;margin:0}.mejs-controls a.mejs-horizontal-volume-slider{height:26px;width:56px;position:relative;display:block;float:left;vertical-align:middle}.mejs-controls .mejs-horizontal-volume-slider .mejs-horizontal-volume-total{position:absolute;left:0;top:11px;width:50px;height:8px;margin:0;padding:0;font-size:1px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;background:#333;background:rgba(50,50,50,.8);background:-webkit-gradient(linear,0 0,0 100%,from(rgba(30,30,30,.8)),to(rgba(60,60,60,.8)));background:-webkit-linear-gradient(top,rgba(30,30,30,.8),rgba(60,60,60,.8));background:-moz-linear-gradient(top,rgba(30,30,30,.8),rgba(60,60,60,.8));background:-o-linear-gradient(top,rgba(30,30,30,.8),rgba(60,60,60,.8));background:-ms-linear-gradient(top,rgba(30,30,30,.8),rgba(60,60,60,.8));background:linear-gradient(rgba(30,30,30,.8),rgba(60,60,60,.8))}.mejs-controls .mejs-horizontal-volume-slider .mejs-horizontal-volume-current{position:absolute;left:0;top:11px;width:50px;height:8px;margin:0;padding:0;font-size:1px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;background:#fff;background:rgba(255,255,255,.8);background:-webkit-gradient(linear,0 0,0 100%,from(rgba(255,255,255,.9)),to(rgba(200,200,200,.8)));background:-webkit-linear-gradient(top,rgba(255,255,255,.9),rgba(200,200,200,.8));background:-moz-linear-gradient(top,rgba(255,255,255,.9),rgba(200,200,200,.8));background:-o-linear-gradient(top,rgba(255,255,255,.9),rgba(200,200,200,.8));background:-ms-linear-gradient(top,rgba(255,255,255,.9),rgba(200,200,200,.8));background:linear-gradient(rgba(255,255,255,.9),rgba(200,200,200,.8))}.mejs-controls .mejs-horizontal-volume-slider .mejs-horizontal-volume-handle{display:none}.mejs-controls .mejs-captions-button{position:relative}.mejs-controls .mejs-captions-button button{background-position:-48px 0}.mejs-controls .mejs-captions-button .mejs-captions-selector{position:absolute;bottom:26px;right:-51px;width:85px;height:100px;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/703c659e4bf563a05c6338a1727e006c.png);background:rgba(50,50,50,.7);border:solid 1px transparent;padding:10px 10px 0;overflow:hidden;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.mejs-controls .mejs-captions-button .mejs-captions-selector ul{margin:0;padding:0;display:block;list-style-type:none!important;overflow:hidden}.mejs-controls .mejs-captions-button .mejs-captions-selector ul li{margin:0 0 6px;padding:0;list-style-type:none!important;display:block;color:#fff;overflow:hidden}.mejs-controls .mejs-captions-button .mejs-captions-selector ul li input{clear:both;float:left;margin:3px 3px 0 5px}.mejs-controls .mejs-captions-button .mejs-captions-selector ul li label{width:55px;float:left;padding:4px 0 0;line-height:15px;font-family:Helvetica,Arial,serif;font-size:10px}.mejs-controls .mejs-captions-button .mejs-captions-translations{font-size:10px;margin:0 0 5px}.mejs-chapters{position:absolute;top:0;left:0;border-right:solid 1px #fff;width:10000px;z-index:1}.mejs-chapters .mejs-chapter{position:absolute;float:left;background:#222;background:rgba(0,0,0,.7);background:-webkit-gradient(linear,0 0,0 100%,from(rgba(50,50,50,.7)),to(rgba(0,0,0,.7)));background:-webkit-linear-gradient(top,rgba(50,50,50,.7),rgba(0,0,0,.7));background:-moz-linear-gradient(top,rgba(50,50,50,.7),rgba(0,0,0,.7));background:-o-linear-gradient(top,rgba(50,50,50,.7),rgba(0,0,0,.7));background:-ms-linear-gradient(top,rgba(50,50,50,.7),rgba(0,0,0,.7));background:linear-gradient(rgba(50,50,50,.7),rgba(0,0,0,.7));filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, startColorstr=#323232, endColorstr=#000000);overflow:hidden;border:0}.mejs-chapters .mejs-chapter .mejs-chapter-block{font-size:11px;color:#fff;padding:5px;display:block;border-right:solid 1px #333;border-bottom:solid 1px #333;cursor:pointer}.mejs-chapters .mejs-chapter .mejs-chapter-block-last{border-right:0}.mejs-chapters .mejs-chapter .mejs-chapter-block:hover{background:#666;background:rgba(102,102,102,.7);background:-webkit-gradient(linear,0 0,0 100%,from(rgba(102,102,102,.7)),to(rgba(50,50,50,.6)));background:-webkit-linear-gradient(top,rgba(102,102,102,.7),rgba(50,50,50,.6));background:-moz-linear-gradient(top,rgba(102,102,102,.7),rgba(50,50,50,.6));background:-o-linear-gradient(top,rgba(102,102,102,.7),rgba(50,50,50,.6));background:-ms-linear-gradient(top,rgba(102,102,102,.7),rgba(50,50,50,.6));background:linear-gradient(rgba(102,102,102,.7),rgba(50,50,50,.6));filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, startColorstr=#666666, endColorstr=#323232)}.mejs-chapters .mejs-chapter .mejs-chapter-block .ch-title{font-size:12px;font-weight:700;display:block;white-space:nowrap;text-overflow:ellipsis;margin:0 0 3px;line-height:12px}.mejs-chapters .mejs-chapter .mejs-chapter-block .ch-timespan{font-size:12px;line-height:12px;margin:3px 0 4px;display:block;white-space:nowrap;text-overflow:ellipsis}.mejs-captions-layer{position:absolute;bottom:0;left:0;text-align:center;line-height:20px;font-size:16px;color:#fff}.mejs-captions-layer a{color:#fff;text-decoration:underline}.mejs-captions-layer[lang=ar]{font-size:20px;font-weight:400}.mejs-captions-position{position:absolute;width:100%;bottom:15px;left:0}.mejs-captions-position-hover{bottom:35px}.mejs-captions-text,.mejs__captions-text *{padding:0;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/703c659e4bf563a05c6338a1727e006c.png);background:rgba(20,20,20,.5);white-space:pre-wrap;-webkit-box-shadow:5px 0 0 rgba(20,20,20,.5),-5px 0 0 rgba(20,20,20,.5);box-shadow:5px 0 0 rgba(20,20,20,.5),-5px 0 0 rgba(20,20,20,.5)}.me-cannotplay{}.me-cannotplay a{color:#fff;font-weight:700}.me-cannotplay span{padding:15px;display:block}.mejs-controls .mejs-loop-off button{background-position:-64px -16px}.mejs-controls .mejs-loop-on button{background-position:-64px 0}.mejs-controls .mejs-backlight-off button{background-position:-80px -16px}.mejs-controls .mejs-backlight-on button{background-position:-80px 0}.mejs-controls .mejs-picturecontrols-button{background-position:-96px 0}.mejs-contextmenu{position:absolute;width:150px;padding:10px;border-radius:4px;top:0;left:0;background:#fff;border:solid 1px #999;z-index:1001}.mejs-contextmenu .mejs-contextmenu-separator{height:1px;font-size:0;margin:5px 6px;background:#333}.mejs-contextmenu .mejs-contextmenu-item{font-family:Helvetica,Arial,serif;font-size:12px;padding:4px 6px;cursor:pointer;color:#333}.mejs-contextmenu .mejs-contextmenu-item:hover{background:#2C7C91;color:#fff}.mejs-controls .mejs-sourcechooser-button{position:relative}.mejs-controls .mejs-sourcechooser-button button{background-position:-128px 0}.mejs-controls .mejs-sourcechooser-button .mejs-sourcechooser-selector{position:absolute;bottom:26px;right:-10px;width:130px;height:100px;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/703c659e4bf563a05c6338a1727e006c.png);background:rgba(50,50,50,.7);border:solid 1px transparent;padding:10px;overflow:hidden;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.mejs-controls .mejs-sourcechooser-button .mejs-sourcechooser-selector ul{margin:0;padding:0;display:block;list-style-type:none!important;overflow:hidden}.mejs-controls .mejs-sourcechooser-button .mejs-sourcechooser-selector ul li{margin:0 0 6px;padding:0;list-style-type:none!important;display:block;color:#fff;overflow:hidden}.mejs-controls .mejs-sourcechooser-button .mejs-sourcechooser-selector ul li input{clear:both;float:left;margin:3px 3px 0 5px}.mejs-controls .mejs-sourcechooser-button .mejs-sourcechooser-selector ul li label{width:100px;float:left;padding:4px 0 0;line-height:15px;font-family:Helvetica,Arial,serif;font-size:10px}.mejs-postroll-layer{position:absolute;bottom:0;left:0;width:100%;height:100%;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/703c659e4bf563a05c6338a1727e006c.png);background:rgba(50,50,50,.7);z-index:1000;overflow:hidden}.mejs-postroll-layer-content{width:100%;height:100%}.mejs-postroll-close{position:absolute;right:0;top:0;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/703c659e4bf563a05c6338a1727e006c.png);background:rgba(50,50,50,.7);color:#fff;padding:4px;z-index:100;cursor:pointer}div.mejs-speed-button{width:46px!important;position:relative}.mejs-controls .mejs-button.mejs-speed-button button{background:transparent;width:36px;font-size:11px;line-height:normal;color:#fff}.mejs-controls .mejs-speed-button .mejs-speed-selector{position:absolute;top:-100px;left:-10px;width:60px;height:100px;background:url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/703c659e4bf563a05c6338a1727e006c.png);background:rgba(50,50,50,.7);border:solid 1px transparent;padding:0;overflow:hidden;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.mejs-controls .mejs-speed-button .mejs-speed-selector ul li label.mejs-speed-selected{color:rgba(33,248,248,1)}.mejs-controls .mejs-speed-button .mejs-speed-selector ul{margin:0;padding:0;display:block;list-style-type:none!important;overflow:hidden}.mejs-controls .mejs-speed-button .mejs-speed-selector ul li{margin:0 0 6px;padding:0 10px;list-style-type:none!important;display:block;color:#fff;overflow:hidden}.mejs-controls .mejs-speed-button .mejs-speed-selector ul li input{clear:both;float:left;margin:3px 3px 0 5px}.mejs-controls .mejs-speed-button .mejs-speed-selector ul li label{width:60px;float:left;padding:4px 0 0;line-height:15px;font-family:Helvetica,Arial,serif;font-size:11px;color:#fff;margin-left:5px;cursor:pointer}.mejs-controls .mejs-speed-button .mejs-speed-selector ul li:hover{background-color:#c8c8c8!important;background-color:rgba(255,255,255,.4)!important}.mejs-controls .mejs-button.mejs-jump-forward-button{background:transparent url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/15e1ac8cbacc2efdf1ac2677de48a253.png) no-repeat 3px 3px}.mejs-controls .mejs-button.mejs-jump-forward-button button{background:transparent;font-size:9px;line-height:normal;color:#fff}.mejs-controls .mejs-button.mejs-skip-back-button{background:transparent url(https://du11hjcvx0uqb.cloudfront.net/br/dist/webpack-production/cd6dc830eb45b3a5a96bbc936ff54846.png) no-repeat 3px 3px}.mejs-controls .mejs-button.mejs-skip-back-button button{background:transparent;font-size:9px;line-height:normal;color:#fff}</style><style type="text/css">/*
 * Copyright (C) 2014 - present Instructure, Inc.
 *
 * This file is part of Canvas.
 *
 * Canvas is free software: you can redistribute it and/or modify it under
 * the terms of the GNU Affero General Public License as published by the Free
 * Software Foundation, version 3 of the License.
 *
 * Canvas is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU Affero General Public License for more
 * details.
 *
 * You should have received a copy of the GNU Affero General Public License along
 * with this program. If not, see <http://www.gnu.org/licenses/>.
 */

/* customizations to mediaelementplayer css */

/*
  Because this file is not proccessed by our brandable_css sass pipeline,
  it cannot use our sass-direction helpers. So we have to handle RTL manually
  by putting direction-specific styles in [dir="ltr"] or [dir="rtl"] blocks.
*/
/* stylelint-disable property-disallowed-list, declaration-property-value-disallowed-list */

/* good menu widths */
.mejs-sourcechooser-selector {
  width: 160px;
}
.mejs-sourcechooser-selector label {
  width: 160px !important;
}

.mejs-captions-selector {
  width: 105px;
}
[dir="ltr"]  .mejs-captions-selector { text-align: left }
[dir="rtl"]  .mejs-captions-selector { text-align: right }

.mejs-captions-selector label {
  width: 70px !important;
}

/* Subtitile upload link */
.mejs-captions-selector .upload-track {
  color: white;
  margin-top: 3px;
  margin-bottom: 5px;
}
[dir="ltr"] .mejs-captions-selector .upload-track {
  margin-right: 0px;
  margin-left: 5px;
  float: left;
}
[dir="rtl"] .mejs-captions-selector .upload-track {
  margin-left: 0px;
  margin-right: 5px;
  float: right;
}

/* "x" button to remove a subtitle */
.mejs-captions-selector a[data-remove] {
  position: absolute;
  top: 0;
  color: white;
}
[dir="ltr"] .mejs-captions-selector a[data-remove] { right: 0 }
[dir="rtl"] .mejs-captions-selector a[data-remove] { left: 0 }


/* style menu items without a radio button */
.mejs-button [role="menu"] {
  padding: 0 !important;
}
 /* compensate for above 0 padding */
 .mejs-button [role="menu"] ul li {
  position: relative;
  padding: 0 10px !important;
}
/* add a hover effect */
.mejs-button [role="menu"] ul li:hover {
  background-color: #c8c8c8 !important;
  background-color: rgba(255, 255, 255, 0.4) !important;
}
.mejs-button [role="menu"] ul li input {
  border: 0;
  clip: rect(0 0 0 0);
  position: absolute;
  overflow: hidden;
  margin: -1px;
  padding: 0;
  width: 1px;
  height: 1px;
}
.mejs-button [role="menu"] ul li label {
  cursor: pointer;
}
[dir="ltr"] .mejs-button [role="menu"] ul li label { margin-left: 5px }
[dir="rtl"] .mejs-button [role="menu"] ul li label { margin-right: 5px }


.mejs-button [role="menu"] label.mejs-selected {
  color: #21f8f8 !important;
}

/* stylelint-enable property-disallowed-list, declaration-property-value-disallowed-list */
</style><script charset="utf-8" src="./fl35_files/4108-c-f51caaec17.js"></script></head>

<body class="with-left-side course-menu-expanded padless-content pages primary-nav-expanded full-width context-course_448 responsive_awareness responsive_misc responsive_student_grades_page show webkit chrome no-touch">

<noscript>
  <div role="alert" class="ic-flash-static ic-flash-error">
    <div class="ic-flash__icon" aria-hidden="true">
      <i class="icon-warning"></i>
    </div>
    <h1> To access this site, you must enable JavaScript.</h1>
  </div>
</noscript>




<ul id="flash_message_holder"></ul>
<div id="flash_screenreader_holder" role="alert" aria-live="assertive" aria-relevant="additions" class="screenreader-only" aria-atomic="false"></div>

<div id="application" class="ic-app">
  



    <header id="mobile-header" class="no-print">
      <button type="button" class="Button Button--icon-action-rev Button--large mobile-header-hamburger">
        <i class="icon-solid icon-hamburger"></i>
        <span id="mobileHeaderInboxUnreadBadge" class="menu-item__badge" style="min-width: 0; top: 12px; height: 12px; right: 6px; display:none;"></span>
        <span class="screenreader-only">Dashboard</span>
      </button>
      <div class="mobile-header-space"></div>
        <a class="mobile-header-title expandable" href="https://moringaschool.instructure.com/courses/448" role="button" aria-controls="mobileContextNavContainer">
          <div>SDC45FlaskRemote</div>
            <div>Monday: Flask Login</div>
        </a>
        <div class="mobile-header-space"></div>
        <button type="button" class="Button Button--icon-action-rev Button--large mobile-header-arrow" aria-label="Navigation menu">
          <i class="icon-arrow-open-down" id="mobileHeaderArrowIcon"></i>
        </button>
    </header>
    <nav id="mobileContextNavContainer"></nav>
  <header id="header" class="ic-app-header no-print ">
    <a href="https://moringaschool.instructure.com/courses/448/pages/monday-flask-login?module_item_id=40095#content" id="skip_navigation_link">Skip to content</a>
      <div role="region" class="ic-app-header__main-navigation" aria-label="Global navigation">
        <div class="ic-app-header__logomark-container">
          <a href="https://moringaschool.instructure.com/" class="ic-app-header__logomark">
            <span class="screenreader-only">Dashboard</span>
          </a>
        </div>
        <ul id="menu" class="ic-app-header__menu-list">
            <li class="menu-item ic-app-header__menu-list-item ">
              <button id="global_nav_profile_link" class="ic-app-header__menu-list-link">
                <div class="menu-item-icon-container">
                  <div aria-hidden="true" class="fs-exclude ic-avatar ">
                    <img src="./fl35_files/avatar-50.png" alt="john.gicho@student.moringaschool.com">
                  </div>
                  <span class="menu-item__badge"></span>
                </div>
                <div class="menu-item__text">
                  Account
                </div>
              </button>
            </li>
          <li class="ic-app-header__menu-list-item ">
            <a id="global_nav_dashboard_link" href="https://moringaschool.instructure.com/" class="ic-app-header__menu-list-link">
              <div class="menu-item-icon-container" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--dashboard" version="1.1" x="0" y="0" viewBox="0 0 280 200" enable-background="new 0 0 280 200" xml:space="preserve"><path d="M273.09,180.75H197.47V164.47h62.62A122.16,122.16,0,1,0,17.85,142a124,124,0,0,0,2,22.51H90.18v16.29H6.89l-1.5-6.22A138.51,138.51,0,0,1,1.57,142C1.57,65.64,63.67,3.53,140,3.53S278.43,65.64,278.43,142a137.67,137.67,0,0,1-3.84,32.57ZM66.49,87.63,50.24,71.38,61.75,59.86,78,76.12Zm147,0L202,76.12l16.25-16.25,11.51,11.51ZM131.85,53.82v-23h16.29v23Zm15.63,142.3a31.71,31.71,0,0,1-28-16.81c-6.4-12.08-15.73-72.29-17.54-84.25a8.15,8.15,0,0,1,13.58-7.2c8.88,8.21,53.48,49.72,59.88,61.81a31.61,31.61,0,0,1-27.9,46.45ZM121.81,116.2c4.17,24.56,9.23,50.21,12,55.49A15.35,15.35,0,1,0,161,157.3C158.18,152,139.79,133.44,121.81,116.2Z"></path></svg>

              </div>
              <div class="menu-item__text">Dashboard</div>
            </a>
          </li>
            <li class="menu-item ic-app-header__menu-list-item ic-app-header__menu-list-item--active">
              <button id="global_nav_courses_link" class="ic-app-header__menu-list-link">
                <div class="menu-item-icon-container" aria-hidden="true">
                  <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--courses" version="1.1" x="0" y="0" viewBox="0 0 280 259" enable-background="new 0 0 280 259" xml:space="preserve"><path d="M73.31,198c-11.93,0-22.22,8-24,18.73a26.67,26.67,0,0,0-.3,3.63v.3a22,22,0,0,0,5.44,14.65,22.47,22.47,0,0,0,17.22,8H200V228.19h-134V213.08H200V198Zm21-105.74h90.64V62H94.3ZM79.19,107.34V46.92H200v60.42Zm7.55,30.21V122.45H192.49v15.11ZM71.65,16.71A22.72,22.72,0,0,0,49,39.36V190.88a41.12,41.12,0,0,1,24.32-8h157V16.71ZM33.88,39.36A37.78,37.78,0,0,1,71.65,1.6H245.36V198H215.15v45.32h22.66V258.4H71.65a37.85,37.85,0,0,1-37.76-37.76Z"></path></svg>

                </div>
                <div class="menu-item__text">
                  Courses
                </div>
              </button>
            </li>
          <li class="menu-item ic-app-header__menu-list-item ">
            <a id="global_nav_calendar_link" href="https://moringaschool.instructure.com/calendar" class="ic-app-header__menu-list-link">
              <div class="menu-item-icon-container" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--calendar" version="1.1" x="0" y="0" viewBox="0 0 280 280" enable-background="new 0 0 280 280" xml:space="preserve"><path d="M197.07,213.38h16.31V197.07H197.07Zm-16.31,16.31V180.76h48.92v48.92Zm-48.92-16.31h16.31V197.07H131.85Zm-16.31,16.31V180.76h48.92v48.92ZM66.62,213.38H82.93V197.07H66.62ZM50.32,229.68V180.76H99.24v48.92Zm146.75-81.53h16.31V131.85H197.07Zm-16.31,16.31V115.54h48.92v48.92Zm-48.92-16.31h16.31V131.85H131.85Zm-16.31,16.31V115.54h48.92v48.92ZM66.62,148.15H82.93V131.85H66.62ZM50.32,164.46V115.54H99.24v48.92ZM34,262.29H246V82.93H34ZM246,66.62V42.16A8.17,8.17,0,0,0,237.84,34H213.38v8.15a8.15,8.15,0,1,1-16.31,0V34H82.93v8.15a8.15,8.15,0,0,1-16.31,0V34H42.16A8.17,8.17,0,0,0,34,42.16V66.62Zm-8.15-48.92a24.49,24.49,0,0,1,24.46,24.46V278.6H17.71V42.16A24.49,24.49,0,0,1,42.16,17.71H66.62V9.55a8.15,8.15,0,0,1,16.31,0v8.15H197.07V9.55a8.15,8.15,0,1,1,16.31,0v8.15Z"></path></svg>

              </div>
              <div class="menu-item__text">
                Calendar
              </div>
            </a>
          </li>
          <li class="menu-item ic-app-header__menu-list-item ">
            <a id="global_nav_conversations_link" href="https://moringaschool.instructure.com/conversations" class="ic-app-header__menu-list-link">
              <div class="menu-item-icon-container">
                <span aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--inbox" version="1.1" x="0" y="0" viewBox="0 0 280 280" enable-background="new 0 0 280 280" xml:space="preserve"><path d="M91.72,120.75h96.56V104.65H91.72Zm0,48.28h80.47V152.94H91.72Zm0-96.56h80.47V56.37H91.72Zm160.94,34.88H228.52V10.78h-177v96.56H27.34A24.17,24.17,0,0,0,3.2,131.48V244.14a24.17,24.17,0,0,0,24.14,24.14H252.66a24.17,24.17,0,0,0,24.14-24.14V131.48A24.17,24.17,0,0,0,252.66,107.34Zm0,16.09a8.06,8.06,0,0,1,8,8v51.77l-32.19,19.31V123.44ZM67.58,203.91v-177H212.42v177ZM27.34,123.44H51.48v79.13L19.29,183.26V131.48A8.06,8.06,0,0,1,27.34,123.44ZM252.66,252.19H27.34a8.06,8.06,0,0,1-8-8V202l30,18H230.75l30-18v42.12A8.06,8.06,0,0,1,252.66,252.19Z"></path></svg>
</span>
                <span class="menu-item__badge"></span>
              </div>
              <div class="menu-item__text">
                Inbox
              </div>
            </a>
          </li>
            <li class="menu-item ic-app-header__menu-list-item">
              <button id="global_nav_history_link" class="ic-app-header__menu-list-link">
                <div class="menu-item-icon-container" aria-hidden="true">
                  <svg viewBox="0 0 1920 1920" class="ic-icon-svg menu-item__icon svg-icon-history" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <path d="M960 112.941c-467.125 0-847.059 379.934-847.059 847.059 0 467.125 379.934 847.059 847.059 847.059 467.125 0 847.059-379.934 847.059-847.059 0-467.125-379.934-847.059-847.059-847.059M960 1920C430.645 1920 0 1489.355 0 960S430.645 0 960 0s960 430.645 960 960-430.645 960-960 960m417.905-575.955L903.552 988.28V395.34h112.941v536.47l429.177 321.77-67.765 90.465z" stroke="none" stroke-width="1" fill-rule="evenodd"></path>
</svg>
                </div>
                <div class="menu-item__text">
                  History
                </div>
              </button>
            </li>
            


          <li class="ic-app-header__menu-list-item">
           <a id="global_nav_help_link" role="button" class="ic-app-header__menu-list-link" data-track-category="help system" data-track-label="help button" href="http://help.instructure.com/">
              <div class="menu-item-icon-container" role="presentation">
                  <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg menu-item__icon svg-icon-cog" version="1.1" x="0" y="0" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve" fill="currentColor"><path d="M100,127.88A27.88,27.88,0,1,1,127.92,100,27.92,27.92,0,0,1,100,127.88M100,61a39,39,0,1,0,39,39,39.08,39.08,0,0,0-39-39m73.42,39a70.26,70.26,0,0,0-1.15-12.57l20.76-18-19.7-33.66-26.19,8.73a74.2,74.2,0,0,0-22.11-12.68L119.68,5.2H80.4L75,31.83A72.9,72.9,0,0,0,52.89,44.51L26.71,35.79,7,69.45l20.74,18a69.95,69.95,0,0,0,0,25.13L7,130.55l19.7,33.66,26.19-8.74A74.23,74.23,0,0,0,75,168.16l5.4,26.64h39.28l5.4-26.63a72.88,72.88,0,0,0,22.11-12.69l26.19,8.74,19.7-33.66-20.76-18A70.26,70.26,0,0,0,173.46,100Zm5.31,32.92-10.45,17.86-23.72-7.92-2.42,2.2a61.7,61.7,0,0,1-23.57,13.51l-3.17,1-4.88,24.1h-21l-4.88-24.11-3.17-1A61.7,61.7,0,0,1,57.91,145l-2.42-2.2-23.72,7.92L21.31,132.91l18.74-16.24-.74-3.26a59.25,59.25,0,0,1,0-26.83l.74-3.26L21.31,67.09,31.76,49.23l23.72,7.91,2.42-2.2A61.87,61.87,0,0,1,81.47,41.42l3.17-1,4.88-24.1h21l4.88,24.11,3.17,1A61.73,61.73,0,0,1,142.18,55l2.42,2.2,23.72-7.92,10.45,17.86L160,83.33l.74,3.26a59.25,59.25,0,0,1,0,26.83l-.74,3.26Z"></path></svg>

                <span class="menu-item__badge"></span>
              </div>
              <div class="menu-item__text">
                Help Desk
              </div>
</a>          </li>
        </ul>
      </div>
      <div class="ic-app-header__secondary-navigation">
        <ul class="ic-app-header__menu-list">
          <li class="menu-item ic-app-header__menu-list-item">
            <button id="primaryNavToggle" class="ic-app-header__menu-list-link ic-app-header__menu-list-link--nav-toggle" aria-label="Minimise global navigation" title="Minimise global navigation">
              <div class="menu-item-icon-container" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" class="ic-icon-svg ic-icon-svg--navtoggle" version="1.1" x="0" y="0" width="40" height="32" viewBox="0 0 40 32" xml:space="preserve">
  <path d="M39.5,30.28V2.48H37.18v27.8Zm-4.93-13.9L22.17,4,20.53,5.61l9.61,9.61H.5v2.31H30.14l-9.61,9.61,1.64,1.64Z"></path>
</svg>

              </div>
            </button>
          </li>
        </ul>
      </div>
    <div id="global_nav_tray_container"></div>
    <div id="global_nav_tour"></div>
  </header>


  <div id="instructure_ajax_error_box">
    <div style="text-align: right; background-color: #fff;"><a href="https://moringaschool.instructure.com/courses/448/pages/monday-flask-login?module_item_id=40095#" class="close_instructure_ajax_error_box_link">Close</a></div>
    <iframe id="instructure_ajax_error_result" src="./fl35_files/saved_resource.html" style="border: 0;" title="Error"></iframe>
  </div>

  <div id="wrapper" class="ic-Layout-wrapper">
      <div class="ic-app-nav-toggle-and-crumbs no-print">
          <button type="button" id="courseMenuToggle" class="Button Button--link ic-app-course-nav-toggle" aria-live="polite" aria-label="Hide courses navigation menu">
            <i class="icon-hamburger" aria-hidden="true"></i>
          </button>

        <div class="ic-app-crumbs">
            <nav id="breadcrumbs" role="navigation" aria-label="breadcrumbs"><ul><li class="home"><a href="https://moringaschool.instructure.com/"><span class="ellipsible">      <i class="icon-home" title="My dashboard">
        <span class="screenreader-only">My dashboard</span>
      </i>
</span></a></li><li><a href="https://moringaschool.instructure.com/courses/448"><span class="ellipsible">SDC45FlaskRemote</span></a></li><li><a href="https://moringaschool.instructure.com/courses/448/pages"><span class="ellipsible">Pages</span></a></li><li><span class="ellipsible">Monday: Flask Login</span></li></ul></nav>
        </div>


        <div class="right-of-crumbs">
            <div class="TutorialToggleHolder"></div>
        </div>

      </div>
    <div id="main" class="ic-Layout-columns">
        <div class="ic-Layout-watermark"></div>
        <div id="left-side" class="ic-app-course-menu list-view" style="display: block">
                <span id="section-tabs-header-subtitle" class="ellipsis">SD45</span>
              <nav role="navigation" aria-label="Courses navigation menu"><ul id="section-tabs"><li class="section"><a href="https://moringaschool.instructure.com/courses/448" class="home" tabindex="0">Home</a></li><li class="section"><a href="https://moringaschool.instructure.com/courses/448/modules" class="modules" tabindex="0">Modules</a></li><li class="section"><a href="https://moringaschool.instructure.com/courses/448/grades" class="grades" tabindex="0">Grades</a></li><li class="section"><a href="https://moringaschool.instructure.com/courses/448/assignments" class="assignments" tabindex="0">Assignments</a></li><li class="section"><a href="https://moringaschool.instructure.com/courses/448/discussion_topics" class="discussions" tabindex="0">Discussions</a></li><li class="section"><a href="https://moringaschool.instructure.com/courses/448/files" class="files" tabindex="0">Files</a></li><li class="section"><a href="https://moringaschool.instructure.com/courses/448/lti_collaborations" class="collaborations" tabindex="0">Collaborations</a></li><li class="section"><a href="https://moringaschool.instructure.com/courses/448/external_tools/162" class="context_external_tool_162" tabindex="0">Google Drive</a></li><li class="section"><a href="https://moringaschool.instructure.com/courses/448/external_tools/164" class="context_external_tool_164" tabindex="0">Daily Health Check </a></li></ul></nav>
        </div>
      <div id="not_right_side" class="ic-app-main-content">
        <div id="content-wrapper" class="ic-Layout-contentWrapper">
          
          <div id="content" class="ic-Layout-contentMain" role="main">
            

  

<div id="wiki_page_show">

<div class="show-content user_content clearfix enhanced">
  <h1 class="page-title">Monday: Flask Login</h1>
  
  
    <div id="content">
<h2>Flask-Login</h2>
<p>The Flask-Login is an extension that helps us manage the user authentication system</p>
<div class="codehilite">
<pre><span></span><code><span class="o">(</span>virtual<span class="o">)</span>$ pip install flask-login
</code></pre>
</div>
<p>We install the extension and we can Initialize it inside our<span>&nbsp;</span><code>create_app</code><span>&nbsp;</span>function.</p>
<div class="codehilite">
<pre><span></span><code><span class="c1">#....</span>
<span class="kn">from</span> <span class="nn">flask_login</span> <span class="kn">import</span> <span class="n">LoginManager</span>

<span class="n">login_manager</span> <span class="o">=</span> <span class="n">LoginManager</span><span class="p">()</span>
<span class="n">login_manager</span><span class="o">.</span><span class="n">session_protection</span> <span class="o">=</span> <span class="s1">'strong'</span>
<span class="n">login_manager</span><span class="o">.</span><span class="n">login_view</span> <span class="o">=</span> <span class="s1">'auth.login'<br><br>def create_app(config_name):<br></span>    #....<br>    #Initializing Flask Extensions<br>    bootstrap.init_app(app)<br>    db.init_app(app)<br>    login_manager.init_app(app)
<span class="c1">#....</span>
</code></pre>
</div>
<p>We import the<span>&nbsp;</span><code>Login Manager</code><span>&nbsp;</span>class from the flask-login extension. We then create an instance of the class.</p>
<p><code>login_manager.session_protection</code><span>&nbsp;</span>attribute provides different security levels and by setting it to<span>&nbsp;</span><code>strong</code><span>&nbsp;</span>will monitor the changes in a user's request header and log the user out.</p>
<p>We prefix the login endpoint with the blueprint name because it is located inside a blueprint.</p>
<h3>Authenticated routes</h3>
<p>Some routes like submitting a new review should only be accessible to users who are authenticated and need to be secured.</p>
<p><em>app/main/views.py</em></p>
<pre><code>#....
from flask_login import login_required
#....
</code></pre>
<p>flask_login has a decorator<span>&nbsp;</span><code>login_required</code><span>&nbsp;</span>that will intercept a request and check if the user is authenticated and if not the user will be redirected to the login page.</p>
<p><em>app/main/views.py</em></p>
<pre><code>#....
@main.route('/movie/review/new/&lt;int:id&gt;', methods = ['GET','POST'])
@login_required
def new_review(id):
#....
</code></pre>
<p>We place the decorator after our new review route decorator.</p>
<h3>Configuring Models</h3>
<p>We need to configure our User model to work with the extension. For this to happen we need our model to implement four methods:</p>
<p style="padding-left: 150px;">1. is_authenticated() - Returns a boolean if a User is authenticated or not.</p>
<p style="padding-left: 150px;">2. is_active()- Checks if a user is allowed to authenticate.</p>
<p style="padding-left: 150px;">3. is_anonymous()- Returns a boolean if a user is anonymous.</p>
<p style="padding-left: 150px;">4. get_id()- Returns a unique identifier for User.</p>
<p>Flask-login provides a class that has the basic implementations of these methods.</p>
<p><em>app/models.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">flask_login</span> <span class="kn">import</span> <span class="n">UserMixin</span>
</code></pre>
</div>
<p>We import the<span>&nbsp;</span><code>UserMixin</code><span>&nbsp;</span>class that we will pass into our<span>&nbsp;</span><code>User</code><span>&nbsp;</span>model. This helps us not to have to implement the methods for ourselves.</p>
<p><em>app/models.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">UserMixin</span><span class="p">,</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">'users'</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span><span class="n">primary_key</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="n">index</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="n">unique</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span><span class="n">index</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">role_id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span><span class="n">db</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">'roles.id'</span><span class="p">))</span>
    <span class="n">password_hash</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span>
</code></pre>
</div>
<p>We also add an<span>&nbsp;</span><code>email</code><span>&nbsp;</span>column to our module, this will help our users to have a better access to their accounts. Remember to create a new Migration after you change the model.</p>
<p>Flask-login also requires a callback function that retrieves a user when a unique identifier is passed.</p>
<p><em>app/models.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="c1">#....</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">login_manager</span>

<span class="nd">@login_manager.user_loader</span>
<span class="k">def</span> <span class="nf">load_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">user_id</span><span class="p">))</span>

<span class="c1">#....</span>
</code></pre>
</div>
<p>Flask-login has a decorator<span>&nbsp;</span><code>@login_manage.user_loader</code><span>&nbsp;</span>that modifies the<span>&nbsp;</span><code>load_user</code>function by passing in a<span>&nbsp;</span><code>user_id</code><span>&nbsp;</span>to the function that queries the database and gets a User with that ID.</p>
<h2>Registering New Users</h2>
<p>We can now register new Users to our application. We first need to create the registration form. We create a new file inside our<span>&nbsp;</span><code>auth</code><span>&nbsp;</span>package<span>&nbsp;</span><code>forms.py</code>. We then need to import it to our<span>&nbsp;</span><code>auth/___init___.py</code><span>&nbsp;</span>file.</p>
<p><code>auth/__init__.py</code></p>
<div class="codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span><span class="p">,</span><span class="n">forms</span>
</code></pre>
</div>
<p>We can now create our registration form</p>
<p><em>auth /forms.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">flask_wtf</span> <span class="kn">import</span> <span class="n">FlaskForm</span>
<span class="kn">from</span> <span class="nn">wtforms</span> <span class="kn">import</span> <span class="n">StringField</span><span class="p">,</span><span class="n">PasswordField</span><span class="p">,</span><span class="n">SubmitField</span>
<span class="kn">from</span> <span class="nn">wtforms.validators</span> <span class="kn">import</span> <span class="n">Required</span><span class="p">,</span><span class="n">Email</span><span class="p">,</span><span class="n">EqualTo</span>
<span class="kn">from</span> <span class="nn">..models</span> <span class="kn">import</span> <span class="n">User</span>
</code></pre>
</div>
<p>We first need to import a few items. First, we import the<span>&nbsp;</span><code>FlaskForm</code><span>&nbsp;</span>class from the<code>flask_wtf</code><span>&nbsp;</span>extension. Secondly, we also import some input fields to facilitate user input. We then import some Validators;<span>&nbsp;</span><code>Email</code><span>&nbsp;</span>validator makes sure that the input follows a proper email address structure and the<span>&nbsp;</span><code>EqualTo</code><span>&nbsp;</span>&nbsp;helps us in comparing the two password inputs.</p>
<p><em>auth /forms.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="k">class</span> <span class="nc">RegistrationForm</span><span class="p">(</span><span class="n">FlaskForm</span><span class="p">):</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s1">'Your Email Address'</span><span class="p">,</span><span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">Required</span><span class="p">(),</span><span class="n">Email</span><span class="p">()])</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s1">'Enter your username'</span><span class="p">,</span><span class="n">validators</span> <span class="o">=</span> <span class="p">[</span><span class="n">Required</span><span class="p">()])</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">PasswordField</span><span class="p">(</span><span class="s1">'Password'</span><span class="p">,</span><span class="n">validators</span> <span class="o">=</span> <span class="p">[</span><span class="n">Required</span><span class="p">(), </span><span class="n">EqualTo</span><span class="p">(</span><span class="s1">'password_confirm'</span><span class="p">,</span><span class="n">message</span> <span class="o">=</span> <span class="s1">'Passwords must match'</span><span class="p">)])</span>
    <span class="n">password_confirm</span> <span class="o">=</span> <span class="n">PasswordField</span><span class="p">(</span><span class="s1">'Confirm Passwords'</span><span class="p">,</span><span class="n">validators</span> <span class="o">=</span> <span class="p">[</span><span class="n">Required</span><span class="p">()])</span>
    <span class="n">submit</span> <span class="o">=</span> <span class="n">SubmitField</span><span class="p">(</span><span class="s1">'Sign Up'</span><span class="p">)</span>
</code></pre>
</div>
<p>We then create a<span>&nbsp;</span><code>RegistrationForm</code><span>&nbsp;</span>form class. We create four input fields.<span>&nbsp;</span><code>email</code>for the users email address, and pass in the<span>&nbsp;</span><code>Required</code><span>&nbsp;</span>and<span>&nbsp;</span><code>Email</code><span>&nbsp;</span>validators.<span>&nbsp;</span><code>username</code><span>&nbsp;</span>for the username field,<span>&nbsp;</span><code>password</code><span>&nbsp;</span>and<span>&nbsp;</span><code>password_confirm</code><span>&nbsp;</span>fields. We pass in the<span>&nbsp;</span><code>EqualTo</code><span>&nbsp;</span>validator to the password to make sure both passwords are the same before the form is submitted.</p>
<h3>Custom Validators</h3>
<p>We can also add our own custom validators.</p>
<p><em>auth /forms.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">wtforms</span> <span class="kn">import</span> <span class="n">ValidationError</span>
<span class="k">class</span> <span class="nc">RegistrationForm</span><span class="p">(</span><span class="n">FlaskForm</span><span class="p">):</span>
    <span class="c1"># .......</span>
    <span class="k">def</span> <span class="nf">validate_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">data_field</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">email</span> <span class="o">=</span><span class="n">data_field</span><span class="o">.</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">():</span>
                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">'There is an account with that email'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate_username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">data_field</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">username</span> <span class="o">=</span> <span class="n">data_field</span><span class="o">.</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">'That username is taken'</span><span class="p">)</span>
</code></pre>
</div>
<p>We import<span>&nbsp;</span><code>ValidationError</code><span>&nbsp;</span>from wtforms and then create two methods.</p>
<p><code>validate_email</code><span>&nbsp;</span>takes in the data field and checks our database to confirm there is no user registered with that email address. If a user with the same email address is found,&nbsp; a<span>&nbsp;</span><code>ValidationError</code><span>&nbsp;</span>is raised and the error message passed in is displayed. As a result, the form is not submitted.</p>
<p><code>validate_username</code><span>&nbsp;</span>checks to see if the username is unique and raises a<span>&nbsp;</span><code>ValidationError</code><span>&nbsp;</span>if another user with a similar username is found.</p>
<p>When a method inside a form class begins with<span>&nbsp;</span><code>validate_</code><span>&nbsp;</span>it is considered as a validator and is run with the other validators for that input field.</p>
<h3>Registration route</h3>
<p><em>auth/views.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="c1"># ....</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span><span class="p">,</span><span class="n">redirect</span><span class="p">,</span><span class="n">url_for</span>
<span class="kn">from</span> <span class="nn">..models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">RegistrationForm</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">db</span>

<span class="c1"># ....</span>
<span class="nd">@auth.route</span><span class="p">(</span><span class="s1">'/register'</span><span class="p">,</span><span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"GET"</span><span class="p">,</span><span class="s2">"POST"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">RegistrationForm</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">validate_on_submit</span><span class="p">():</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">email</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">email</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">username</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">username</span><span class="o">.</span><span class="n">data</span><span class="p">,</span><span class="n">password</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">password</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">'auth.login'</span><span class="p">))</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s2">"New Account"</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">'auth/register.html'</span><span class="p">,</span><span class="n">registration_form</span> <span class="o">=</span> <span class="n">form</span><span class="p">)</span>
</code></pre>
</div>
<p>We create the form instance and pass it into our template. When the form is submitted we create a new user from the<span>&nbsp;</span><code>User</code><span>&nbsp;</span>model and pass in the email,username and password. We add the new user to the session and commit the session to add the user to our database.</p>
<p>Our user can then log in to the application and we redirect them to the login route.</p>
<p>We can render the registration form with the<span>&nbsp;</span><code>wtf.quick_form()</code><span>&nbsp;</span>function.</p>
<p><em>app/templates/auth/register.html</em></p>
<div class="codehilite">
<pre>{% extends 'base.html'%}<br>{% import 'bootstrap/wtf.html' as wtf%}<br><br>{% block content %}<br>&lt;div class="container"&gt;<br>&lt;div class="row"&gt;<br>&lt;div class="col-md-2"&gt; &lt;/div&gt;<br>&lt;div class="col-md-8"&gt;<br><br>{{wtf.quick_form(registration_form)}}<br><br>&lt;/div&gt;<br>&lt;div class="col-md-2"&gt;&lt;/div&gt;<br>&lt;/div&gt;<br>&lt;/div&gt;<br><br>{% endblock%}<code>
</code></pre>
</div>
<h2>Login Users</h2>
<p>We need to create a Login form that will give users access to some of the features of our application.</p>
<p><em>app/auth/forms.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="c1">#....</span>
<span class="kn">from</span> <span class="nn">wtforms</span> <span class="kn">import</span> <span class="n">StringField</span><span class="p">,</span><span class="n">PasswordField</span><span class="p">,</span><span class="n">BooleanField</span><span class="p">,</span><span class="n">SubmitField</span>
<span class="o">.....</span>
</code></pre>
</div>
<p>We add a<span>&nbsp;</span><code>BooleanField</code><span>&nbsp;</span>input field that will render a checkbox in our form.</p>
<p><em>app/auth/forms.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="k">class</span> <span class="nc">LoginForm</span><span class="p">(</span><span class="n">FlaskForm</span><span class="p">):</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s1">'Your Email Address'</span><span class="p">,</span><span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">Required</span><span class="p">(),</span><span class="n">Email</span><span class="p">()])</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">PasswordField</span><span class="p">(</span><span class="s1">'Password'</span><span class="p">,</span><span class="n">validators</span> <span class="o">=</span><span class="p">[</span><span class="n">Required</span><span class="p">()])</span>
    <span class="n">remember</span> <span class="o">=</span> <span class="n">BooleanField</span><span class="p">(</span><span class="s1">'Remember me'</span><span class="p">)</span>
    <span class="n">submit</span> <span class="o">=</span> <span class="n">SubmitField</span><span class="p">(</span><span class="s1">'Sign In'</span><span class="p">)</span>
</code></pre>
</div>
<p>We then create 3 input fields for the users email,password and a boolean to confirm wheter the user wants to be logged out after the session.</p>
<p><em>app/auth/views.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="c1">#....<br></span>from flask import render_template,redirect,url_for, flash,request
<span class="kn">from</span> <span class="nn">flask_login</span> <span class="kn">import</span> <span class="n">login_user</span>
<span class="kn">from</span> <span class="nn">..models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">LoginForm</span><span class="p">,</span><span class="n">RegistrationForm</span>

<span class="c1">#....</span>
<span class="nd">@auth.route</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">,</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">'GET'</span><span class="p">,</span><span class="s1">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="n">login_form</span> <span class="o">=</span> <span class="n">LoginForm</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">login_form</span><span class="o">.</span><span class="n">validate_on_submit</span><span class="p">():</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">email</span> <span class="o">=</span> <span class="n">login_form</span><span class="o">.</span><span class="n">email</span><span class="o">.</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">user</span><span class="o">.</span><span class="n">verify_password</span><span class="p">(</span><span class="n">login_form</span><span class="o">.</span><span class="n">password</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">login_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span><span class="n">login_form</span><span class="o">.</span><span class="n">remember</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'next'</span><span class="p">)</span> <span class="ow">or</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">'main.index'</span><span class="p">))</span>

        <span class="n">flash</span><span class="p">(</span><span class="s1">'Invalid username or Password'</span><span class="p">)</span>

    <span class="n">title</span> <span class="o">=</span> <span class="s2">"watchlist login"</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">'auth/login.html'</span><span class="p">,</span><span class="n">login_form</span> <span class="o">=</span> <span class="n">login_form</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
<span class="c1">#....</span>
</code></pre>
</div>
<p>First, we import flash and request functions from the flask module. The flash function helps us display error messages to the user.</p>
<p>We create an instance of the<span>&nbsp;</span><code>LoginForm</code><span>&nbsp;</span>and pass it into the<span>&nbsp;</span><code>login.html</code>template. Then we check if the form is validated where we search for a user from our database with the email we receive from the form.</p>
<p>We then use the<span>&nbsp;</span><code>verify_password</code><span>&nbsp;</span>method to confirm that the password entered matches with the password hash stored in the database. If they match, we use the<span>&nbsp;</span><code>login_user</code><span>&nbsp;</span>function provided by the<span>&nbsp;</span><code>flask_login</code><span>&nbsp;</span>extension to record the user as logged for that current session. It takes user object and the remember form data. If True it sets a long time cookie in your browser.</p>
<p>We can now render the form in our<span>&nbsp;</span><code>login.html</code><span>&nbsp;</span>template using the<span>&nbsp;</span><code>wtf.quick_forms()</code><span>&nbsp;</span>function.</p>
<p>To confirm login state we can update our navigation bar.</p>
<p><em>app/templates/navbar.html</em></p>
<div class="codehilite">
<pre><span></span><code>#....
                <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"nav navbar-nav navbar-right"</span><span class="p">&gt;</span>
                  {% if current_user.is_authenticated %}
                  <span class="p">&lt;</span><span class="nt">li style="color:white;padding:15px;"</span><span class="p">&gt;</span>{{current_user.username}}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"{{url_for('auth.logout')}}"</span><span class="p">&gt;</span>Sign out<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                  {% else %}
                  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"{{url_for('auth.login')}}"</span><span class="p">&gt;</span>Sign in<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                  {%endif%}
                <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
#....
</code></pre>
</div>
<p>Current user is a variable that is defined by flask-login and is made available to all the view functions and templates.</p>
<p>Now that we have all that taken care of, let's update our login.html file to have a form and a link to the sign up page.</p>
<p>login.html</p>
<div class="codehilite">
<div class="codehilite">
<pre><span></span><code><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">'base.html'</span><span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">import</span> <span class="s1">'bootstrap/wtf.html'</span> <span class="k">as</span> <span class="nv">wtf</span><span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;div class="container"&gt; <br>    &lt;div class="row"&gt;<br>      &lt;div class= "col-md-2"&gt; &lt;/div&gt;<br>      &lt;div class="col-md-8"&gt;<br>      &lt;!--Flash message --&gt;<br>      {% for message in get_flashed_messages() %}<br>        &lt;div class="alert alert-danger"&gt;<br>        &lt;button type="button" class="close" data-dismiss="alert"&gt;&amp;times;&lt;/button&gt;<br>        {{ message }}<br>        &lt;/div&gt;<br>      {% endfor %}<br>      &lt;!-- Login form --&gt;<br>      {{wtf.quick_form(login_form)}}<br>      &lt;p&gt; Don't have an account? &lt;a href="{{url_for('auth.register')}}"&gt;Sign up here&lt;/a&gt;&lt;/p&gt;<br>     &lt;/div&gt;<br>     &lt;div clas="col-md-2"&gt; &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span><span class="cp">%}</span></code></pre>
</div>
</div>
<h3>Log out</h3>
<p><em>app/auth/views.py</em></p>
<div class="codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">flask_login</span> <span class="kn">import</span> <span class="n">login_user</span><span class="p">,</span><span class="n">logout_user</span><span class="p">,</span><span class="n">login_required</span>
<span class="c1">#....</span>
<span class="nd">@auth.route</span><span class="p">(</span><span class="s1">'/logout'</span><span class="p">)</span>
<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">logout</span><span class="p">():</span>
    <span class="n">logout_user</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s2">"main.index"</span><span class="p">))</span>

<span class="c1">#....</span>
</code></pre>
</div>
<p>We create an authenticated route<span>&nbsp;</span><code>logout</code><span>&nbsp;</span>that calls the flask_login's<span>&nbsp;</span><code>logout_user</code>function. This will logout the user from our application. We then redirect the user to the<span>&nbsp;</span><code>index</code><span>&nbsp;</span>page.</p>
<p>You can find the application at this point here <a href="https://github.com/mbuthiya/watchlist/tree/25-creating-registration-form" class="external" target="_blank" rel="noreferrer noopener"><span>https://github.com/mbuthiya/watchlist/tree/25-creating-registration-form</span><span aria-hidden="true" class="ui-icon ui-icon-extlink ui-icon-inline" title="Links to an external site."></span><span class="screenreader-only">&nbsp;(Links to an external site.)</span></a></p>
</div>
<p>Copyright 2017 Moringa School.</p>
  
<iframe id="fs-iframe" title="Content Page Rating" src="./fl35_files/student_contract_copy.html" width="100%" height="400x"></iframe></div>
</div>
<div id="module_navigation_target"><div style=""><div class="module-sequence-padding"></div>
<div class="module-sequence-footer" role="navigation" aria-label="Module Navigation">
  <div class="module-sequence-footer-content">
    
      <span class="module-sequence-footer-button--previous" data-tooltip="right" data-html-tooltip-title="&lt;i class=&#39;icon-document&#39;&gt;&lt;/i&gt; Monday: Migration; Password Hashing">
          <a href="https://moringaschool.instructure.com/courses/448/modules/items/40094" role="button" class="Button" aria-describedby="msf0-previous-desc" aria-label="Previous Module Item">
            <i class="icon-mini-arrow-left"></i>Previous
            <span id="msf0-previous-desc" class="hidden" hidden="">Previous: Monday: Migration; Password Hashing</span>
          </a>
      </span>
    

    
      <span class="module-sequence-footer-button--next" data-tooltip="left" data-html-tooltip-title="&lt;i class=&#39;icon-document&#39;&gt;&lt;/i&gt; Tuesday: User Profile">
        <a href="https://moringaschool.instructure.com/courses/448/modules/items/40096" role="button" class="Button" aria-describedby="msf0-next-desc" aria-label="Next Module Item">
          Next<i class="icon-mini-arrow-right"></i>
          <span id="msf0-next-desc" class="hidden" hidden="">Next: Tuesday: User Profile</span>
        </a>
      </span>
    
  </div>
</div>
</div></div>

          </div>
        </div>
        <div id="right-side-wrapper" class="ic-app-main-content__secondary">
          <aside id="right-side" role="complementary">
            
          </aside>
        </div>
      </div>
    </div>
  </div>



    <div style="display:none;"><!-- Everything inside of this should always stay hidden -->
        <div id="page_view_id">f94b0e1d-e896-4be9-9870-47db3ecaffce</div>
    </div>
  <div id="aria_alerts" class="hide-text affix" role="alert" aria-live="assertive"></div>
  <div id="StudentTray__Container"></div>
    <div class="NewUserTutorialTray__Container"></div>
  

  <script>
    Object.assign(
      ENV,
      {}
    )
  </script>

<link rel="preload" href="./fl35_files/inst_fs_service_worker-c-45cd13f265.js" as="script" type="text/javascript"><script>
//<![CDATA[
(window.bundles || (window.bundles = [])).push('inst_fs_service_worker');
//]]>
</script>
  <script>
//<![CDATA[

      ;["https://instructure-uploads-eu.s3.eu-west-1.amazonaws.com/account_118060000000000001/attachments/68244/sth.js"].forEach(function(src) {
        var s = document.createElement('script')
        s.src = src
        s.async = false
        document.head.appendChild(s)
      });
//]]>
</script>

</div> <!-- #application -->


<div id="nav-tray-portal" style="position: relative; z-index: 99;"></div></body></html>